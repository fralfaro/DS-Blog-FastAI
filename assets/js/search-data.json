{
  
    
        "post0": {
            "title": "Polars",
            "content": "Introducci&#243;n . Polars es una librerÃ­a de DataFrames increÃ­blemente rÃ¡pida implementada en Rust utilizando Arrow Columnar Format de Apache como modelo de memoria. . Lazy | eager execution | Multi-threaded | SIMD (Single Instruction, Multiple Data) | Query optimization | Powerful expression API | Rust | Python | ... | . Esta secciÃ³n tiene como objetivos presentarle Polars a travÃ©s de ejemplos y comparÃ¡ndolo con otras soluciones. . Nota:Si usted no esta familiarizado con la manipulaciÃ³n de datos en Python, se recomienda partir leyendo sobre la librerÃ­a de Pandas. TambiÃ©n, se deja como referencia el curso de ManipulaciÃ³n de Datos. . Primeros Pasos . Instalaci&#243;n . Para instalar Polars, necesitarÃ¡ usar la lÃ­nea de comando. Si ha instalado Anaconda, puede usar: . conda install -c conda-forge polars . De lo contrario, puede instalar con pip: . pip install polars . Nota:Todos los binarios estÃ¡n preconstruidos para Python v3.6+. . Rendimiento . Polars es muy rÃ¡pido y, de hecho, es una de las mejores soluciones disponibles. Tomemos como referencia db-benchmark de h2oai. Esta pÃ¡gina tiene como objetivo comparar varias herramientas similares a bases de datos populares en la ciencia de datos de cÃ³digo abierto. Se ejecuta regularmente con las Ãºltimas versiones de estos paquetes y se actualiza automÃ¡ticamente. . TambiÃ©n se incluye la sintaxis que se cronometra junto con el tiempo. De esta manera, puede ver de inmediato si estÃ¡ realizando estas tareas o no, y si las diferencias de tiempo le importan o no. Una diferencia de 10x puede ser irrelevante si eso es solo 1s frente a 0,1s en el tamaÃ±o de sus datos. . A modo de ejemplo, veamos algunos ejemplos de performances de distintas librerÃ­as para ejecutar distintos tipos de tareas sobre datasets con distintos tamaÃ±os. Para el caso de tareas bÃ¡sicas sobre un dataset de 50 GB, Polars supera a librerÃ­as espacializadas en distribuciÃ³n de Dataframes como Spark (143 segundos vs 568 segundos). Por otro lado, librerÃ­as conocidas en Python como Pandas o Dask se tiene el problema de out of memory. . . Expresiones en Polars . Polars tiene un poderoso concepto llamado expresiones. Las expresiones polares se pueden usar en varios contextos y son un mapeo funcional de Fn(Series) -&gt; Series, lo que significa que tienen Series como entrada y Series como salida. Al observar esta definiciÃ³n funcional, podemos ver que la salida de un Expr tambiÃ©n puede servir como entrada de un Expr. . Eso puede sonar un poco extraÃ±o, asÃ­ que vamos a dar un ejemplo. . La siguiente es una expresiÃ³n: . pl.col(&quot;foo&quot;).sort().head(2) . El fragmento anterior dice seleccionar la columna &quot;foo&quot;, luego ordenar esta columna y luego tomar los primeros 2 valores de la salida ordenada. El poder de las expresiones es que cada expresiÃ³n produce una nueva expresiÃ³n y que se pueden canalizar juntas. Puede ejecutar una expresiÃ³n pasÃ¡ndola en uno de los contextos de ejecuciÃ³n polares. AquÃ­ ejecutamos dos expresiones ejecutando df.select: . df.select([ pl.col(&quot;foo&quot;).sort().head(2), pl.col(&quot;barra&quot;).filter(pl.col(&quot;foo&quot;) == 1).sum() ]) . Todas las expresiones se ejecutan en paralelo. (Tenga en cuenta que dentro de una expresiÃ³n puede haber mÃ¡s paralelizaciÃ³n). . Expresiones . En esta secciÃ³n veremos algunos ejemplos, pero primero vamos a crear un conjunto de datos: . import polars as pl import numpy as np . np.random.seed(12) df = pl.DataFrame( { &quot;nrs&quot;: [1, 2, 3, None, 5], &quot;names&quot;: [&quot;foo&quot;, &quot;ham&quot;, &quot;spam&quot;, &quot;egg&quot;, None], &quot;random&quot;: np.random.rand(5), &quot;groups&quot;: [&quot;A&quot;, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;B&quot;], } ) print(df) . shape: (5, 4) â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ nrs â”† names â”† random â”† groups â”‚ â”‚ â”† â”† â”† â”‚ â”‚ i64 â”† str â”† f64 â”† str â”‚ â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•¡ â”‚ 1 â”† foo â”† 0.154163 â”† A â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 2 â”† ham â”† 0.74 â”† A â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 3 â”† spam â”† 0.263315 â”† B â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ null â”† egg â”† 0.533739 â”† C â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 5 â”† null â”† 0.014575 â”† B â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Puedes hacer mucho con las expresiones. Son tan expresivos que a veces tienes varias formas de obtener los mismos resultados. Para tener una idea de ellos, veamos algunos ejemplos. . Contar valores &#250;nicos . Podemos contar los valores Ãºnicos en una columna. Tenga en cuenta que estamos creando el mismo resultado de diferentes maneras. Para no tener nombres de columna duplicados en el DataFrame, usamos una expresiÃ³n de alias, que cambia el nombre de una expresiÃ³n. . out = df.select( [ pl.col(&quot;names&quot;).n_unique().alias(&quot;unique_names_1&quot;), pl.col(&quot;names&quot;).unique().count().alias(&quot;unique_names_2&quot;), ] ) print(out) . shape: (1, 2) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ unique_names_1 â”† unique_names_2 â”‚ â”‚ â”† â”‚ â”‚ u32 â”† u32 â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡ â”‚ 5 â”† 5 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Varias agregaciones . Podemos hacer varias agregaciones. A continuaciÃ³n mostramos algunas de ellas, pero hay mÃ¡s, como median, mean, first, etc. . out = df.select( [ pl.sum(&quot;random&quot;).alias(&quot;sum&quot;), pl.min(&quot;random&quot;).alias(&quot;min&quot;), pl.max(&quot;random&quot;).alias(&quot;max&quot;), pl.col(&quot;random&quot;).max().alias(&quot;other_max&quot;), pl.std(&quot;random&quot;).alias(&quot;std dev&quot;), pl.var(&quot;random&quot;).alias(&quot;variance&quot;), ] ) print(out) . shape: (1, 6) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ sum â”† min â”† max â”† other_max â”† std dev â”† variance â”‚ â”‚ â”† â”† â”† â”† â”† â”‚ â”‚ f64 â”† f64 â”† f64 â”† f64 â”† f64 â”† f64 â”‚ â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•¡ â”‚ 1.705842 â”† 0.014575 â”† 0.74 â”† 0.74 â”† 0.293209 â”† 0.085971 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Filtro y condicionales . TambiÃ©n podemos hacer algunas cosas bastante complejas. En el siguiente fragmento, contamos todos los nombres que terminan con la cadena &quot;am&quot;. . out = df.select( [ pl.col(&quot;names&quot;).filter(pl.col(&quot;names&quot;).str.contains(r&quot;am$&quot;)).count(), ] ) print(df) . shape: (5, 4) â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ nrs â”† names â”† random â”† groups â”‚ â”‚ â”† â”† â”† â”‚ â”‚ i64 â”† str â”† f64 â”† str â”‚ â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•¡ â”‚ 1 â”† foo â”† 0.154163 â”† A â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 2 â”† ham â”† 0.74 â”† A â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 3 â”† spam â”† 0.263315 â”† B â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ null â”† egg â”† 0.533739 â”† C â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 5 â”† null â”† 0.014575 â”† B â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Funciones binarias y modificaci&#243;n . En el ejemplo a continuaciÃ³n, usamos un condicional para crear una nueva expresiÃ³n a continuaciÃ³n when -&gt; then -&gt; otherwise. La funciÃ³n when() requiere una expresiÃ³n de predicado (y, por lo tanto, conduce a una serie booleana), luego espera una expresiÃ³n que se usarÃ¡ en caso de que el predicado se evalÃºe como verdadero y, de lo contrario, espera una expresiÃ³n que se usarÃ¡ en caso de que el predicado se evalÃºe. falso. . Tenga en cuenta que puede pasar cualquier expresiÃ³n, o simplemente expresiones base como pl.col(&quot;foo&quot;), pl.lit(3), pl.lit(&quot;bar&quot;), etc. . Finalmente, multiplicamos esto con el resultado de una expresiÃ³n de suma. . out = df.select( [ pl.when(pl.col(&quot;random&quot;) &gt; 0.5).then(0).otherwise(pl.col(&quot;random&quot;)) * pl.sum(&quot;nrs&quot;), ] ) print(out) . shape: (5, 1) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ literal â”‚ â”‚ â”‚ â”‚ f64 â”‚ â•â•â•â•â•â•â•â•â•â•â•â•¡ â”‚ 1.695791 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 0.0 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 2.896465 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 0.0 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 0.160325 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Expresiones de ventana . Una expresiÃ³n polar tambiÃ©n puede hacer un GROUPBY, AGGREGATION y JOIN implÃ­citos en una sola expresiÃ³n. En los ejemplos a continuaciÃ³n, hacemos un GROUPBY sobre &quot;groups&quot; y AGREGATE SUM de &quot;random&quot;, y en la siguiente expresiÃ³n GROUPBY OVER &quot;names&quot; y AGREGATE una lista de &quot;random&quot;. Estas funciones de ventana se pueden combinar con otras expresiones y son una forma eficaz de determinar estadÃ­sticas de grupo. Vea mÃ¡s expresiones en el siguiente link. . out = df[ [ pl.col(&quot;*&quot;), # select all pl.col(&quot;random&quot;).sum().over(&quot;groups&quot;).alias(&quot;sum[random]/groups&quot;), pl.col(&quot;random&quot;).list().over(&quot;names&quot;).alias(&quot;random/name&quot;), ] ] print(out) . shape: (5, 6) â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ nrs â”† names â”† random â”† groups â”† sum[random]/groups â”† random/name â”‚ â”‚ â”† â”† â”† â”† â”† â”‚ â”‚ i64 â”† str â”† f64 â”† str â”† f64 â”† list [f64] â”‚ â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•¡ â”‚ 1 â”† foo â”† 0.154163 â”† A â”† 0.894213 â”† [0.154163] â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 2 â”† ham â”† 0.74 â”† A â”† 0.894213 â”† [0.74] â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 3 â”† spam â”† 0.263315 â”† B â”† 0.2778 â”† [0.263315] â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ null â”† egg â”† 0.533739 â”† C â”† 0.533739 â”† [0.533739] â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ 5 â”† null â”† 0.014575 â”† B â”† 0.2778 â”† [0.014575] â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . GroupBy . Un enfoque multiproceso . Una de las formas mÃ¡s eficientes de procesar datos tabulares es paralelizar su procesamiento a travÃ©s del enfoque &quot;dividir-aplicar-combinar&quot;. Esta operaciÃ³n es el nÃºcleo de la implementaciÃ³n del agrupamiento de Polars, lo que le permite lograr operaciones ultrarrÃ¡pidas. MÃ¡s especÃ­ficamente, las fases de &quot;divisiÃ³n&quot; y &quot;aplicaciÃ³n&quot; se ejecutan de forma multiproceso. . Una operaciÃ³n de agrupaciÃ³n simple se toma a continuaciÃ³n como ejemplo para ilustrar este enfoque: . . Para las operaciones hash realizadas durante la fase de &quot;divisiÃ³n&quot;, Polars utiliza un enfoque sin bloqueo de subprocesos mÃºltiples que se ilustra en el siguiente esquema: . . Â¡Esta paralelizaciÃ³n permite que las operaciones de agrupaciÃ³n y uniÃ³n (por ejemplo) sean increÃ­blemente rÃ¡pidas! . &#161;No mates la paralelizaci&#243;n! . Todos hemos escuchado que Python es lento y &quot;no escala&quot;. AdemÃ¡s de la sobrecarga de ejecutar el cÃ³digo de bytes &quot;lento&quot;, Python debe permanecer dentro de las restricciones del Bloqueo de intÃ©rprete global (GIL). Esto significa que si uno usa una lambda o una funciÃ³n de Python personalizada para aplicar durante una fase de paralelizaciÃ³n, la velocidad de Polars se limita al ejecutar el cÃ³digo de Python, lo que evita que varios subprocesos ejecuten la funciÃ³n. . Todo esto se siente terriblemente limitante, especialmente porque a menudo necesitamos esos lambda en un paso .groupby(), por ejemplo. Este enfoque aÃºn es compatible con Polars, pero teniendo en cuenta el cÃ³digo de bytes Y el precio GIL deben pagarse. . Para mitigar esto, Polars implementa una poderosa sintaxis definida no solo en su API perezosa (lazy), sino tambiÃ©n en su entusiasta (eager). . Expresiones polares . En la introducciÃ³n de la pÃ¡gina anterior, discutimos que el uso de funciones personalizadas de Python eliminaba la paralelizaciÃ³n y que podemos usar las expresiones de la API diferida para mitigar esto. Echemos un vistazo a lo que eso significa. . Comencemos con el conjunto de datos simple del congreso de EE. UU. . import polars as pl dataset = pl.read_csv(&quot;legislators-current.csv&quot;) dataset = dataset.with_column(pl.col(&quot;birthday&quot;).str.strptime(pl.Date)) dataset.head() . &lt;table border=&quot;1 &quot;class=&quot;dataframe &quot;&gt; last_name first_name middle_name suffix nickname full_name birthday gender type state district senate_class party url address phone contact_form rss_url twitter facebook youtube youtube_id bioguide_id thomas_id opensecrets_id lis_id fec_ids cspan_id govtrack_id votesmart_id ballotpedia_id washington_post_id icpsr_id wikipedia_id . str | str | str | str | str | str | date | str | str | str | i64 | i64 | str | str | str | str | str | str | str | str | str | str | str | i64 | str | str | str | i64 | i64 | i64 | str | str | i64 | str | . &quot;Brown&quot; | &quot;Sherrod&quot; | null | null | null | &quot;Sherrod Brown&quot; | 1952-11-09 | &quot;M&quot; | &quot;sen&quot; | &quot;OH&quot; | null | 1 | &quot;Democrat&quot; | &quot;https://www.brown.senate.gov&quot; | &quot;503 Hart Senate Office Building Washington DC 20510&quot; | &quot;202-224-2315&quot; | &quot;https://www.brown.senate.gov/contact/&quot; | &quot;http://www.brown.senate.gov/rss/feeds/?type=all&amp;&quot; | &quot;SenSherrodBrown&quot; | &quot;SenatorSherrodBrown&quot; | &quot;SherrodBrownOhio&quot; | &quot;UCgy8jfERh-t_ixkKKoCmglQ&quot; | &quot;B000944&quot; | 136 | &quot;N00003535&quot; | &quot;S307&quot; | &quot;H2OH13033,S6OH00163&quot; | 5051 | 400050 | 27018 | &quot;Sherrod Brown&quot; | null | 29389 | &quot;Sherrod Brown&quot; | . &quot;Cantwell&quot; | &quot;Maria&quot; | null | null | null | &quot;Maria Cantwell&quot; | 1958-10-13 | &quot;F&quot; | &quot;sen&quot; | &quot;WA&quot; | null | 1 | &quot;Democrat&quot; | &quot;https://www.cantwell.senate.gov&quot; | &quot;511 Hart Senate Office Building Washington DC 20510&quot; | &quot;202-224-3441&quot; | &quot;https://www.cantwell.senate.gov/public/index.cfm/email-maria&quot; | &quot;http://www.cantwell.senate.gov/public/index.cfm/rss/feed&quot; | &quot;SenatorCantwell&quot; | &quot;senatorcantwell&quot; | &quot;SenatorCantwell&quot; | &quot;UCN52UDqKgvHRk39ncySrIMw&quot; | &quot;C000127&quot; | 172 | &quot;N00007836&quot; | &quot;S275&quot; | &quot;S8WA00194,H2WA01054&quot; | 26137 | 300018 | 27122 | &quot;Maria Cantwell&quot; | null | 39310 | &quot;Maria Cantwell&quot; | . &quot;Cardin&quot; | &quot;Benjamin&quot; | &quot;L.&quot; | null | null | &quot;Benjamin L. Cardin&quot; | 1943-10-05 | &quot;M&quot; | &quot;sen&quot; | &quot;MD&quot; | null | 1 | &quot;Democrat&quot; | &quot;https://www.cardin.senate.gov&quot; | &quot;509 Hart Senate Office Building Washington DC 20510&quot; | &quot;202-224-4524&quot; | &quot;https://www.cardin.senate.gov/contact/&quot; | &quot;http://www.cardin.senate.gov/rss/feeds/?type=all&quot; | &quot;SenatorCardin&quot; | &quot;senatorbencardin&quot; | &quot;senatorcardin&quot; | &quot;UCiQaJnMzlfzzG3VESgyZChA&quot; | &quot;C000141&quot; | 174 | &quot;N00001955&quot; | &quot;S308&quot; | &quot;H6MD03177,S6MD03177&quot; | 4004 | 400064 | 26888 | &quot;Ben Cardin&quot; | null | 15408 | &quot;Ben Cardin&quot; | . &quot;Carper&quot; | &quot;Thomas&quot; | &quot;Richard&quot; | null | null | &quot;Thomas R. Carper&quot; | 1947-01-23 | &quot;M&quot; | &quot;sen&quot; | &quot;DE&quot; | null | 1 | &quot;Democrat&quot; | &quot;https://www.carper.senate.gov/public&quot; | &quot;513 Hart Senate Office Building Washington DC 20510&quot; | &quot;202-224-2441&quot; | &quot;https://www.carper.senate.gov/public/index.cfm/email-senator-carper&quot; | &quot;http://www.carper.senate.gov/public/index.cfm/rss/feed&quot; | &quot;SenatorCarper&quot; | &quot;tomcarper&quot; | &quot;senatorcarper&quot; | &quot;UCgLnvbKwu4B3navofj6Qvvw&quot; | &quot;C000174&quot; | 179 | &quot;N00012508&quot; | &quot;S277&quot; | &quot;S8DE00079&quot; | 663 | 300019 | 22421 | &quot;Tom Carper&quot; | null | 15015 | &quot;Tom Carper&quot; | . &quot;Casey&quot; | &quot;Robert&quot; | &quot;P.&quot; | &quot;Jr.&quot; | &quot;Bob&quot; | &quot;Robert P. Casey, Jr.&quot; | 1960-04-13 | &quot;M&quot; | &quot;sen&quot; | &quot;PA&quot; | null | 1 | &quot;Democrat&quot; | &quot;https://www.casey.senate.gov&quot; | &quot;393 Russell Senate Office Building Washington DC 20510&quot; | &quot;202-224-6324&quot; | &quot;https://www.casey.senate.gov/contact&quot; | &quot;http://www.casey.senate.gov/rss/feeds/?all&quot; | &quot;SenBobCasey&quot; | &quot;SenatorBobCasey&quot; | &quot;SenatorBobCasey&quot; | &quot;UCtVssXhx-KuZa-hSvnsnJ0A&quot; | &quot;C001070&quot; | 1828 | &quot;N00027503&quot; | &quot;S309&quot; | &quot;S6PA00217&quot; | 47036 | 412246 | 2541 | &quot;Bob Casey, Jr.&quot; | null | 40703 | &quot;Bob Casey Jr.&quot; | . &lt;/table&gt; Agregaciones b&#225;sicas . Puede combinar fÃ¡cilmente diferentes agregaciones agregando varias expresiones en una lista. No hay un lÃ­mite superior en el nÃºmero de agregaciones que puede hacer y puede hacer cualquier combinaciÃ³n que desee. En el fragmento a continuaciÃ³n, hacemos las siguientes agregaciones: . Por grupo &quot;first_name&quot;: . cuente el nÃºmero de filas en el grupo: forma abreviada: pl.count(&quot;party&quot;) | forma completa: pl.col(&quot;party&quot;).count() | . | agregue el grupo de valores de gÃ©nero a una lista: forma completa: pl.col(&quot;gender&quot;).list() | . | obtenga el primer valor de la columna &quot;last_name&quot; en el grupo: forma abreviada: pl.primero(&quot;last_name&quot;) | forma completa: pl.col(&quot;last_name&quot;).first() | . | . AdemÃ¡s de la agregaciÃ³n, clasificamos inmediatamente el resultado y lo limitamos a los 5 principales para que tengamos un buen resumen general. . q = ( dataset.lazy() .groupby(&quot;first_name&quot;) .agg( [ pl.count(), pl.col(&quot;gender&quot;).list(), pl.first(&quot;last_name&quot;), ] ) .sort(&quot;count&quot;, reverse=True) .limit(5) ) df = q.collect() print(df) . shape: (5, 4) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ first_name â”† count â”† gender â”† last_name â”‚ â”‚ â”† â”† â”† â”‚ â”‚ str â”† u32 â”† list [str] â”† str â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•¡ â”‚ John â”† 19 â”† [&#34;M&#34;, &#34;M&#34;, ... &#34;M&#34;] â”† Barrasso â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ Mike â”† 13 â”† [&#34;M&#34;, &#34;M&#34;, ... &#34;M&#34;] â”† Kelly â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ Michael â”† 11 â”† [&#34;M&#34;, &#34;M&#34;, ... &#34;M&#34;] â”† Bennet â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ David â”† 11 â”† [&#34;M&#34;, &#34;M&#34;, ... &#34;M&#34;] â”† Cicilline â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ James â”† 9 â”† [&#34;M&#34;, &#34;M&#34;, ... &#34;M&#34;] â”† Inhofe â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Condicionales . Ok, eso fue bastante fÃ¡cil, Â¿verdad? Subamos un nivel. Digamos que queremos saber cuÃ¡ntos delegados de un &quot;estado&quot; son administraciÃ³n &quot;demo&quot; o &quot;repu&quot;. PodrÃ­amos consultarlo directamente en la agregaciÃ³n sin la necesidad de lambda o arreglar el DataFrame. . q = ( dataset.lazy() .groupby(&quot;state&quot;) .agg( [ (pl.col(&quot;party&quot;) == &quot;Democrat&quot;).sum().alias(&quot;demo&quot;), (pl.col(&quot;party&quot;) == &quot;Republican&quot;).sum().alias(&quot;repu&quot;), ] ) .sort(&quot;demo&quot;, reverse=True) .limit(5) ) df = q.collect() print(df) . shape: (5, 3) â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â” â”‚ state â”† demo â”† repu â”‚ â”‚ â”† â”† â”‚ â”‚ str â”† u32 â”† u32 â”‚ â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•¡ â”‚ CA â”† 44 â”† 10 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ NY â”† 21 â”† 8 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ IL â”† 15 â”† 5 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ TX â”† 13 â”† 25 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ NJ â”† 12 â”† 2 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜ . Por supuesto, tambiÃ©n se podrÃ­a hacer algo similar con un GROUPBY anidado, pero eso no me permitirÃ­a mostrar estas caracterÃ­sticas agradables. ğŸ˜‰ . q = ( dataset.lazy() .groupby([&quot;state&quot;, &quot;party&quot;]) .agg([pl.count(&quot;party&quot;).alias(&quot;count&quot;)]) .filter((pl.col(&quot;party&quot;) == &quot;Democrat&quot;) | (pl.col(&quot;party&quot;) == &quot;Republican&quot;)) .sort(&quot;count&quot;, reverse=True) .limit(5) ) df = q.collect() print(df) . shape: (5, 3) â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â” â”‚ state â”† party â”† count â”‚ â”‚ â”† â”† â”‚ â”‚ str â”† str â”† u32 â”‚ â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•¡ â”‚ CA â”† Democrat â”† 44 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ TX â”† Republican â”† 25 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ NY â”† Democrat â”† 21 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ FL â”† Republican â”† 18 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ IL â”† Democrat â”† 15 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜ . Filtraci&#243;n . TambiÃ©n podemos filtrar los grupos. Digamos que queremos calcular una media por grupo, pero no queremos incluir todos los valores de ese grupo y tampoco queremos filtrar las filas del DataFrame (porque necesitamos esas filas para otra agregaciÃ³n). . En el siguiente ejemplo, mostramos cÃ³mo se puede hacer eso. Tenga en cuenta que podemos hacer funciones de Python para mayor claridad. Estas funciones no nos cuestan nada. Esto se debe a que solo creamos Polars expression, no aplicamos una funciÃ³n personalizada sobre Series durante el tiempo de ejecuciÃ³n de la consulta. . from datetime import date def compute_age() -&gt; pl.Expr: return date(2021, 1, 1).year - pl.col(&quot;birthday&quot;).dt.year() def avg_birthday(gender: str) -&gt; pl.Expr: return compute_age().filter(pl.col(&quot;gender&quot;) == gender).mean().alias(f&quot;avg {gender} birthday&quot;) . q = ( dataset.lazy() .groupby([&quot;state&quot;]) .agg( [ avg_birthday(&quot;M&quot;), avg_birthday(&quot;F&quot;), (pl.col(&quot;gender&quot;) == &quot;M&quot;).sum().alias(&quot;# male&quot;), (pl.col(&quot;gender&quot;) == &quot;F&quot;).sum().alias(&quot;# female&quot;), ] ) .limit(5) ) df = q.collect() print(df) . shape: (5, 5) â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ state â”† avg M birthday â”† avg F birthday â”† # male â”† # female â”‚ â”‚ â”† â”† â”† â”† â”‚ â”‚ str â”† f64 â”† f64 â”† u32 â”† u32 â”‚ â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•¡ â”‚ MT â”† 61.666667 â”† null â”† 3 â”† 0 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ OH â”† 59.466667 â”† 64.0 â”† 15 â”† 3 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ AK â”† 72.5 â”† 64.0 â”† 2 â”† 1 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ IN â”† 55.0 â”† 50.5 â”† 9 â”† 2 â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ MD â”† 67.8 â”† null â”† 10 â”† 0 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Sorting . A menudo veo que se ordena un DataFrame con el Ãºnico propÃ³sito de ordenar durante la operaciÃ³n GROUPBY. Digamos que queremos obtener los nombres de los polÃ­ticos mÃ¡s antiguos y mÃ¡s jÃ³venes (no es que todavÃ­a estÃ©n vivos) por estado, podrÃ­amos ORDENAR y AGRUPAR. . def get_person() -&gt; pl.Expr: return pl.col(&quot;first_name&quot;) + pl.lit(&quot; &quot;) + pl.col(&quot;last_name&quot;) q = ( dataset.lazy() .sort(&quot;birthday&quot;) .groupby([&quot;state&quot;]) .agg( [ get_person().first().alias(&quot;youngest&quot;), get_person().last().alias(&quot;oldest&quot;), ] ) .limit(5) ) df = q.collect() print(df) . shape: (5, 3) â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ state â”† youngest â”† oldest â”‚ â”‚ â”† â”† â”‚ â”‚ str â”† str â”† str â”‚ â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡ â”‚ VI â”† Stacey Plaskett â”† Stacey Plaskett â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ MD â”† Steny Hoyer â”† Jamie Raskin â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ NE â”† Deb Fischer â”† Benjamin Sasse â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ AL â”† Richard Shelby â”† Barry Moore â”‚ â”œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¼â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ”¤ â”‚ MP â”† Gregorio Sablan â”† Gregorio Sablan â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . Referencias . Polars - User Guide | Polars - Github | .",
            "url": "https://fralfaro.github.io/ds_blog/python/2022/03/16/polars.html",
            "relUrl": "/python/2022/03/16/polars.html",
            "date": " â€¢ Mar 16, 2022"
        }
        
    
  
    
        ,"post1": {
            "title": "Buenas PrÃ¡cticas",
            "content": "Introducci&#243;n . Una pregunta que surgue a menudo cuando uno se encuentra programando es saber cuÃ¡l es la forma correcta de programar. La respuesta es que no existe la forma correcta de programar (ya sea en Python o cualquier otro lenguaje), sin embargo, existen estandares dentro del mundo de la programaciÃ³n, con el fin de hacer el cÃ³digo mÃ¡s legible, sencillo de entender y ayudar a encontrar posibles errores. . En esta secciÃ³n se mostrarÃ¡ algunos conceptos sencillos que te ayudarÃ¡n a mejorar tus skills en el desarrollo de software (con Python). . Estilo de codificaci&#243;n: PEP8 . El PEP8 es un estilo de codificaciÃ³n que proporciona convenciones de codificaciÃ³n para el cÃ³digo Python que comprende la biblioteca estÃ¡ndar en la distribuciÃ³n principal de Python. . Algunos aspectos importantes: . El PEP8 y el PEP 257 (Docstring Conventions) fueron adaptados del ensayo original de la GuÃ­a de estilo Python de Guido, con algunas adiciones de la guÃ­a de estilo de Barry. . | Esta guÃ­a de estilo evoluciona con el tiempo a medida que se identifican convenciones adicionales y las convenciones pasadas se vuelven obsoletas debido a cambios en el propio lenguaje. . | Muchos proyectos tienen sus propias pautas de estilo de codificaciÃ³n. En caso de conflicto, dichas guÃ­as especÃ­ficas del proyecto tienen prioridad para ese proyecto. . | . Basados en el PEP8 y algunas buenas prÃ¡cticas del diseÃ±o de software, veamos ejemplo para poder escribir de mejor forma nuestros cÃ³digos. . Variables . Cuando sea posible, define variables con nombres que tengan algÃºn sentido o que puedas identificar fÃ¡cilmente, no importa que sean mÃ¡s largas. Por ejemplo, en un programa podrÃ­amos escribir: . a = 10. b = 3.5 print(f&quot;El area es {a*b}&quot; ) . El area es 35.0 . pero, Â¿quÃ© significan a y b? lo sabemos por el comentario (bien hecho), pero si mÃ¡s adelante nos encontramos con esas variables, tendremos que recordar cual es cual. Es mejor usar nombres con significado: . altura = 10. base = 3.5 print(f&quot;El area es {a*b}&quot; ) . El area es 35.0 . Lineas de c&#243;digos . Las lÃ­neas de codigo no deben ser muy largas, como mucho 72 caracteres. Si se tiene una lÃ­nea larga, se puede cortar con una barra invertida ( ) y continuar en la siguiente lÃ­nea: . print(&quot;Esta es una frase muy larga, se puede cortar con un y seguir en la lÃ­nea inferior.&quot;) . Esta es una frase muy larga, se puede cortar con un y seguir en la lÃ­nea inferior. . Comentarios . Los comentarios son muy importantes al escribir un programa. Describen lo que estÃ¡ sucediendo dentro de un programa, para que una persona que mira el cÃ³digo fuente no tenga dificultades para descifrarlo. . # esto es un comentario print(&#39;Hola&#39;) . Hola . TambiÃ©n podemos tener comentarios multilÃ­neas: . # Este es un comentario largo # y se extiende # a varias lÃ­neas . Importaciones . Las importaciones generalmente deben estar en lÃ­neas separadas: . # no: import sys, os . # si: import os import sys . Comparaciones . Existen varias formas de hacer comparaciones de objetos (principalmente en el uso del bucle if), acÃ¡ se dejan alguna recomendaciones: . # no if greeting == True: # no if greeting is True: . # si if greeting: . Identaci&#243;n . Dentro de parÃ©ntesis, corchetes o llaves, no dejar espacios inmediatamente dentro de ellos: . # no lista_01 = [1, 2, 3,4, 5, 6,7, 8, 9,] . # si lista_01 = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, ] . Aunque en Python se pueden hacer varias declaraciones en una lÃ­nea, se recomienda hacer sÃ³lo una en cada lÃ­nea: . # no a = 10; b = 20 . # si a = 10 b = 20 . Cuando se trabaja con lista, conjuntos y/o tuplas se recomienda poner en cada lÃ­nea sus argumentos. . # no lista = [(1, &#39;hola&#39;),(2, &#39;mundo&#39;),] . # si lista = [ (1, &#39;hola&#39;), (2, &#39;mundo&#39;), ] . Lo anterior se puede extender para funciones con muchos argumentos . # no def funcion_01(x1,x2,x3,x4): print(x1,x2,x3,x4) def funcion_02( x1,x2,x3,x4): print(x1,x2,x3,x4) . # si def funcion_01(x1,x2, x3,x4): print(x1,x2,x3,x4) def funcion_02( x1,x2, x3,x4): print(x1,x2,x3,x4) . Operadores binarios . Un tema interesante es corresponde a la identaciÃ³n respecto a los operadores binarios, acÃ¡ se muestra la forma correcta de hacerlo: . # no income = (gross_wages + taxable_interest + (dividends - qualified_dividends) - ira_deduction - student_loan_interest) . # si income = (gross_wages + taxable_interest + (dividends - qualified_dividends) - ira_deduction - student_loan_interest) . Manipulaci&#243;n de listas . Aunque combinar iterables con elementos de control de flujo para manipular listas es muy sencillo con Python, hay mÃ©todos especÃ­ficos mÃ¡s eficientes para hacer lo mismo. Pensemos el fitrado de datos de una lista: . # Seleccionar los nÃºmeros positivos numeros = [-3, 2, 1, -8, -2, 7] positivos = [] for i in numeros: if i &gt; 0: positivos.append(i) print(f&quot;positivos: {positivos}&quot;) . positivos: [2, 1, 7] . Aunque tÃ©cnicamente es correcto, es mÃ¡s eficiente hacer List Comprehension: . # comprension de lista numeros = [-3, 2, 1, -8, -2, 7] positivos = [i for i in numeros if i &gt; 0] # List Comprehension print(f&quot;positivos: {positivos}&quot;) . positivos: [2, 1, 7] . Especificar tipo de error . Cuando se ocupa try/except, es necesario especificar el tipo de error que se estÃ¡ cometiendo. . # importar librerias import sys . # no try: r = 1/0 except: print(&quot;Oops! ocurrio un&quot;,sys.exc_info()[0]) . Oops! ocurrio un &lt;class &#39;ZeroDivisionError&#39;&gt; . # si try: r = 1/0 except ZeroDivisionError: print(&quot;Oops! ocurrio un&quot;,sys.exc_info()[0]) . Oops! ocurrio un &lt;class &#39;ZeroDivisionError&#39;&gt; . Explicitar dependencias de una funci&#243;n . Siempre es mejor definir las variables dentro de una funciÃ³n y no dejar variables globales. . # no valor = 5 def funcion_01(variable): return 2*variable + valor . funcion_01(2) . 9 . # si def funcion_01(variable,valor): return 2*variable + valor . funcion_01(2,5) . 9 . Dynamic/Static typing . Con Python 3 se puede especificar el tipo de parÃ¡metro y el tipo de retorno de una funciÃ³n (usando la notaciÃ³n PEP484 y PEP526. Se definen dos conceptos claves: . Escritura dinÃ¡mica: no se especifican los atributos de los inputs ni de los ouputs | Escritura estÃ¡tica: se especifican los atributos de los inputs y los ouputs | . # escritura dinÃ¡mica def suma(x,y): return x+y . print(suma(1,2)) . 3 . # escritura estatica def suma(x:float, y:float)-&gt;float: return x+y . print(suma(1,2)) . 3 . Para la escritura estÃ¡tica, si bien se especifica el tipo de atributo (tanto de los inputs o outputs), la funciÃ³n puede recibir otros tipos de atributos. . print(suma(&quot;hola&quot;,&quot; mundo&quot;)) . hola mundo . Para validar los tipos de datos son los correctos, se deben ocupar librerÃ­as especializadas en la validaciÃ³n de datos (por ejemplo: pydantic). . Librer&#237;as . Existen librerÃ­as que pueden ayudar a corregir errores de escrituras en tÃº cÃ³digo (tambiÃ©n conocido como AnÃ¡lisis EstÃ¡tico), por ejemplo: . black: El formateador de cÃ³digo inflexible. | flake8: La herramienta para aplicar la guÃ­a de estilo PEP8. | mypy: Mypy es un verificador de tipo estÃ¡tico para Python 3. | . Documentaci&#243;n . Casi tan importante como la escritura de cÃ³digo, es su correcta documentaciÃ³n, una parte fundamental de cualquier programa que a menudo se infravalora o simplemente se ignora. Aparte de los comentarios entre el cÃ³digo explicando cÃ³mo funciona, el elemento bÃ¡sico de documentaciÃ³n de Python es el Docstring o cadena de documentaciÃ³n, que ya hemos visto. Simplemente es una cadena de texto con triple comillas que se coloca justo despuÃ©s de la definiciÃ³n de funciÃ³n o clase que sirve de documentaciÃ³n a ese elemento. . def potencia(x, y): &quot;&quot;&quot; Calcula la potencia arbitraria de un numero &quot;&quot;&quot; return x**y . potencia.__doc__ . &#39; n Calcula la potencia arbitraria de un numero n &#39; . help(potencia) . Help on function potencia in module __main__: potencia(x, y) Calcula la potencia arbitraria de un numero . Lo correcto es detallar lo mejor posible en el Docstring quÃ© hace y cÃ³mo se usa la funciÃ³n o clase y los parÃ¡metros que necesita. Se recomienda usar el estilo de documentaciÃ³n del software de documentaciÃ³n sphinx, que emplea reStructuredText como lenguaje de marcado. . Veamos un ejemplo de una funciÃ³n bien documentada: . def potencia(x, y): &quot;&quot;&quot; Calcula la potencia arbitraria de un numero :param x: base :param y: exponente :return: potencia de un numero :ejemplos: &gt;&gt;&gt; potencia(2, 1) 2 &gt;&gt;&gt; potencia(3, 2) 9 &quot;&quot;&quot; return x**y . potencia.__doc__ . &#39; n Calcula la potencia arbitraria de un numero n n :param x: base n :param y: exponente n :return: potencia de un numero n :ejemplos: n n &gt;&gt;&gt; potencia(2, 1) n 2 n &gt;&gt;&gt; potencia(3, 2) n 9 n &#39; . help(potencia) . Help on function potencia in module __main__: potencia(x, y) Calcula la potencia arbitraria de un numero :param x: base :param y: exponente :return: potencia de un numero :ejemplos: &gt;&gt;&gt; potencia(2, 1) 2 &gt;&gt;&gt; potencia(3, 2) 9 . Existen varias formas de documentar tus funciones, las principales encontradas en la literatura son: . Google docstrings: forma de documentaciÃ³n recomendada por Google.. | reStructured Text: estÃ¡ndar oficial de documentaciÃ³n de Python; No es apto para principiantes, pero tiene muchas funciones. | NumPy/SciPy docstrings: combinaciÃ³n de NumPy de reStructured y Google Docstrings. | . Zen de python . El Zen de Python te darÃ¡ la guÃ­a para decidir sobre que hacer con tu cÃ³digo, no te dice como lo debes escribir, sino como debes pensar si estas programando en Python. . Principios importantes: . ExplÃ­cito es mejor que implÃ­cito: Que no se asuma nada, asegÃºrate que las cosas sean. | Simple es mejor que complejo: Evita cÃ³digo complejo, cÃ³digo espagueti o que hace mas cosas para poder hacer una simple tarea. | Plano es mejor que anidado: Si tu cÃ³digo tiene mas de 3 niveles de identaciÃ³n, deberÃ­as mover parte de ese cÃ³digo a una funciÃ³n. | Los errores nunca deberÃ­an pasar silenciosamente: No uses un Try/Except sin definir que tipo de error vas a cachar, viene de la mano con Explicito es mejor que implÃ­cito. | Si la implementaciÃ³n es difÃ­cil de explicar, es mala idea. | . TambiÃ©n, podemos ver el mensaje original del zen de python, ejecutando la siguiente linea de comando. . import this . The Zen of Python, by Tim Peters Beautiful is better than ugly. Explicit is better than implicit. Simple is better than complex. Complex is better than complicated. Flat is better than nested. Sparse is better than dense. Readability counts. Special cases aren&#39;t special enough to break the rules. Although practicality beats purity. Errors should never pass silently. Unless explicitly silenced. In the face of ambiguity, refuse the temptation to guess. There should be one-- and preferably only one --obvious way to do it. Although that way may not be obvious at first unless you&#39;re Dutch. Now is better than never. Although never is often better than *right* now. If the implementation is hard to explain, it&#39;s a bad idea. If the implementation is easy to explain, it may be a good idea. Namespaces are one honking great idea -- let&#39;s do more of those! . M&#225;s consejos . Los consejos que se presentan son de mucha utilidad si usted quiere llevar sus conociminetos de programaciÃ³n al siguiente nivel, sin embargo, el contenido de cada uno amerita un curso por si solo. Se deja recomienda al lector seguir profundizando en estos temas. . Entender programaci&#243;n multiparadigma . Python al ser multiparadigma, nos da una amplia gama de posibilidades de diseÃ±ar nuestros cÃ³digos. Dentro de estos se destacan: . ProgramaciÃ³n orientada a objetos (OOP) | ProgramaciÃ³n funcional | . CuÃ¡ndo ocupar uno o la otra, va a depender de cÃ³mo queremos abordar una determinada problemÃ¡tica, puesto que en la mayorÃ­a de los casos, se puede pasar de un paradigma a o otro (incluso mezclarlos de ser necesario). . Principio S.O.L.I.D . En ingenierÃ­a de software, SOLID (Single responsibility, Open-closed, Liskov substitution, Interface segregation and Dependency inversion) es un acrÃ³nimo mnemÃ³nico introducido por Robert C. Martin a comienzos de la dÃ©cada del 2000 que representa cinco principios bÃ¡sicos de la programaciÃ³n orientada a objetos y el diseÃ±o. Cuando estos principios se aplican en conjunto es mÃ¡s probable que un desarrollador cree un sistema que sea fÃ¡cil de mantener y ampliar con el tiempo. . En el siguiente link se deja una guÃ­a para poder entender estos conceptos en python. . Patrones de dise&#241;o . Los patrones de diseÃ±o son la base para la bÃºsqueda de soluciones a problemas comunes en el desarrollo de software y otros Ã¡mbitos referentes al diseÃ±o de interacciÃ³n o interfaces. . Un patrÃ³n de diseÃ±o es una soluciÃ³n a un problema de diseÃ±o. . Se destacan tres tipos de patrones de diseÃ±os: . Comportamiento | Creacionales | Estructurales | . En el siguiente link se deja una guÃ­a para poder entender estos conceptos en python. . Lecturas recomendadas . The Clean Coder: A Code Of Conduct For Professional Programmers Robert C. Martin (2011) | Clean Code: A Handbook of Agile Software - Robert C. Martin (2009). | Working effectively with legacy code Michael C. Feathers (2004) | Refactoring Martin Fowler (1999) | The Pragmatic Programmer Thomas Hunt (1999) | .",
            "url": "https://fralfaro.github.io/ds_blog/pep8/documentation/tdd/2021/08/31/buenas_practicas.html",
            "relUrl": "/pep8/documentation/tdd/2021/08/31/buenas_practicas.html",
            "date": " â€¢ Aug 31, 2021"
        }
        
    
  
    
        ,"post2": {
            "title": "Fastpages",
            "content": "Introducci&#243;n . Fastpages es una plataforma que te permite crear y alojar un blog de forma gratuita, sin anuncios y con muchas funciones Ãºtiles, como: . Cree publicaciones que contengan cÃ³digo, salidas de cÃ³digo (que pueden ser interactivas), texto formateado, etc. directamente desde Jupyter Notebooks. Las publicaciones en notebooks admiten funciones como: Las visualizaciones interactivas realizadas con Altair siguen siendo interactivas. | Ocultar o mostrar la entrada y salida de la celda. | Celdas de cÃ³digo contraÃ­bles que estÃ¡n abiertas o cerradas de forma predeterminada. | Defina el tÃ­tulo, el resumen y otros metadatos a travÃ©s de celdas de rebajas especiales | Posibilidad de agregar enlaces a Colab y GitHub automÃ¡ticamente. | . | Cree publicaciones, incluido el formato y las imÃ¡genes, directamente desde documentos de Microsoft Word. | Cree y edite publicaciones de Markdown completamente en lÃ­nea usando el editor de Markdown incorporado de GitHub. | Inserta tarjetas de Twitter y videos de YouTube. | CategorizaciÃ³n de publicaciones de blog por etiquetas proporcionadas por el usuario para mayor visibilidad. | . En esta secciÃ³n se enseÃ±arÃ¡ los pasos bÃ¡sicos para poder crear su propio blog con fastpages. . Primeros pasos . Configurando Fastpages . Â¡El proceso de configuraciÃ³n de pÃ¡ginas rÃ¡pidas tambiÃ©n estÃ¡ automatizado con GitHub Actions! Al crear un repositorio a partir de la plantilla de pÃ¡ginas rÃ¡pidas, se abrirÃ¡ automÃ¡ticamente una solicitud de extracciÃ³n (despuÃ©s de ~ 30 segundos) configurando su blog para que pueda comenzar a funcionar. La solicitud de extracciÃ³n automatizada lo recibirÃ¡ con instrucciones como esta: . Â¡Todo lo que tienes que hacer es seguir estas instrucciones (en el PR que recibes) y tu nuevo sitio de blogs estarÃ¡ en funcionamiento! . Note: Si tienes dudas con la instalaciÃ³n, te recomiendo ver el siguiente video. . Estructura de Fastpages . El repositorio de fastpages esta compuesto de la siguiente forma: . â”œâ”€â”€ .github â”œâ”€â”€ _action_files â”œâ”€â”€ _fastpages_docs â”œâ”€â”€ images â”œâ”€â”€ _includes â”œâ”€â”€ _layouts â”œâ”€â”€ _notebooks â”œâ”€â”€ _pages â”œâ”€â”€ _plugins â”œâ”€â”€ _posts â”œâ”€â”€ _sass â””â”€â”€ _word â””â”€â”€ .devcontainer.json â””â”€â”€ Makefile â””â”€â”€ index.html â””â”€â”€ Gemfile â””â”€â”€ _config.yml â””â”€â”€ LICENSE â””â”€â”€ docker-compose.yml â””â”€â”€ Gemfile.lock â””â”€â”€ README.md â””â”€â”€ .gitattributes â””â”€â”€ .gitignore . De momento nos vamos a centrar en algunos de estos archivos: . _config.yml: es el archivo que funciona como el motor del proyecto. En ente archivo, podemos poner el nombre a nuestro blog, el logo, informaciÃ³n personal (github, linkedin, etc), entre otras cosas. . | index.html: Corresponde a la primera pÃ¡gina cuando se despliega nuestro blog. por lo que es importante escribir algÃºn mensaje para especificar la motivaciÃ³n de hacer un blog. . | /_notebooks: Lugar donde se deben guardar los notebooks (.ipynb) con la convenciÃ³n de nomenclatura YYYY-MM-DD-*.ipynb. . | /_posts: Lugar donde se deben guardar los archivos markdown (.md) con la convenciÃ³n de nomenclatura YYYY-MM-DD-*.md. . | /_word: Lugar donde se deben guardar los archivos word (.docx) con la convenciÃ³n de nomenclatura YYYY-MM-DD-*.docx. . | . . Note: fastpages usa nbdev para impulsar el proceso de conversiÃ³n de Jupyter Notebooks en publicaciones de blog. Cuando guardas un notebook en la carpeta /_notebooks de tu repositorio, GitHub Actions aplica nbdev a esos notebooks automÃ¡ticamente. El mismo proceso ocurre cuando guarda documentos de Word o markdown en el directorio _word o_posts, respectivamente. . Jupyter Notebooks y Fastpages . En esta parte, se muestran caracterÃ­sticas especiales que fastpages proporciona para los notebooks. TambiÃ©n puede escribir las publicaciones de su blog con documentos de Word o makdown. . Opciones a trav&#233;s de FrontMatter . La primera celda de su Jupyter Notebook o markdown contiene informaciÃ³n preliminar. El tema principal son los metadatos que pueden activar/desactivar opciones en su Notebook. Tiene el formato siguiente: . # Title &gt; Awesome summary - toc:true- branch: master - badges: true - comments: true - author: Hamel Husain &amp; Jeremy Howard - categories: [fastpages, jupyter] . Todas las configuraciones anteriores estÃ¡n habilitadas en esta publicaciÃ³n, Â¡para que pueda ver cÃ³mo se ven! . El campo de resumen (precedido por &gt;) se mostrarÃ¡ debajo de su tÃ­tulo y tambiÃ©n lo utilizarÃ¡n las redes sociales para mostrar la descripciÃ³n de su pÃ¡gina. | toc: establecer esto en true generarÃ¡ automÃ¡ticamente una tabla de contenido | badges: establecer esto en true mostrarÃ¡ los enlaces de Google Colab y GitHub en la publicaciÃ³n de su blog. | comments: establecer esto en true habilitarÃ¡ los comentarios. Consulte estas instrucciones para obtener mÃ¡s detalles. | autor: esto mostrarÃ¡ los nombres de los autores. | categories: permitirÃ¡ que su publicaciÃ³n sea categorizada en una pÃ¡gina de &quot;Etiquetas&quot;, donde los lectores pueden navegar por su publicaciÃ³n por categorÃ­as. | . Markdown Front Matters tiene un formato similar al de los notebooks. Las diferencias entre los dos se puede ver en el siguiente link. . Code Folding . coloque una marca # collapse-hide en la parte superior de cualquier celda si desea ocultar esa celda de forma predeterminada, pero dÃ©le al lector la opciÃ³n de mostrarla: . import pandas as pd import altair as alt . . coloque una marca # collapse-show en la parte superior de cualquier celda si desea mostrar esa celda de forma predeterminada, pero dÃ©le al lector la opciÃ³n de ocultarla: . cars = &#39;https://vega.github.io/vega-datasets/data/cars.json&#39; movies = &#39;https://vega.github.io/vega-datasets/data/movies.json&#39; sp500 = &#39;https://vega.github.io/vega-datasets/data/sp500.csv&#39; stocks = &#39;https://vega.github.io/vega-datasets/data/stocks.csv&#39; flights = &#39;https://vega.github.io/vega-datasets/data/flights-5k.json&#39; . . Si desea ocultar las celdas por completo (no solo contraerlas), lea estas instrucciones. . Tablas de datos . Puede mostrar tablas de la forma habitual en su blog: . df[[&#39;Title&#39;, &#39;Worldwide_Gross&#39;, &#39;Production_Budget&#39;, &#39;IMDB_Rating&#39;]].head() . Title Worldwide_Gross Production_Budget IMDB_Rating . 0 The Land Girls | 146083.0 | 8000000.0 | 6.1 | . 1 First Love, Last Rites | 10876.0 | 300000.0 | 6.9 | . 2 I Married a Strange Person | 203134.0 | 250000.0 | 6.8 | . 3 Let&#39;s Talk About Sex | 373615.0 | 300000.0 | NaN | . 4 Slam | 1087521.0 | 1000000.0 | 3.4 | . Gr&#225;ficos interactivos con Altair . Â¡Las visualizaciones interactivas realizadas con Altair siguen siendo interactivas! . Dejamos esta celda de abajo sin ocultar para que pueda disfrutar de una vista previa del resaltado de sintaxis en pÃ¡ginas rÃ¡pidas, que utiliza el tema de drÃ¡cula. . # select a point for which to provide details-on-demand label = alt.selection_single( encodings=[&#39;x&#39;], # limit selection to x-axis value on=&#39;mouseover&#39;, # select on mouseover events nearest=True, # select data point nearest the cursor empty=&#39;none&#39; # empty selection includes no data points ) # define our base line chart of stock prices base = alt.Chart().mark_line().encode( alt.X(&#39;date:T&#39;), alt.Y(&#39;price:Q&#39;, scale=alt.Scale(type=&#39;log&#39;)), alt.Color(&#39;symbol:N&#39;) ) alt.layer( base, # base line chart # add a rule mark to serve as a guide line alt.Chart().mark_rule(color=&#39;#aaa&#39;).encode( x=&#39;date:T&#39; ).transform_filter(label), # add circle marks for selected time points, hide unselected points base.mark_circle().encode( opacity=alt.condition(label, alt.value(1), alt.value(0)) ).add_selection(label), # add white stroked text to provide a legible background for labels base.mark_text(align=&#39;left&#39;, dx=5, dy=-5, stroke=&#39;white&#39;, strokeWidth=2).encode( text=&#39;price:Q&#39; ).transform_filter(label), # add text labels for stock prices base.mark_text(align=&#39;left&#39;, dx=5, dy=-5).encode( text=&#39;price:Q&#39; ).transform_filter(label), data=stocks ).properties( width=500, height=400 ) . . Otras caracter&#237;sticas . Al escribir Le doy a esta publicaciÃ³n dos :+1:! Se mostrarÃ¡ esto: . Le doy a esta publicaciÃ³n dos :+1:! . Im&#225;genes con leyenda . Puede incluir imÃ¡genes de rebajas con leyenda (caption) como este: . ![](https://www.fast.ai/images/fastai_paper/show_batch.png &quot;Credit: https://www.fast.ai/2020/02/13/fastai-A-Layered-API-for-Deep-Learning/&quot;) . . Por supuesto, la leyenda es opcional. . Tweetcards . Si escribe &gt; twitter: https://twitter.com/jakevdp/status/1204765621767901185?s=20 mostrarÃ¡ esto: Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 . Youtube Videos . Si escribe &gt; youtube: https://youtu.be/XfoYk_Z5AkI mostrarÃ¡ esto: . Boxes/Callouts . Puedes ejecutar algunas cajas con mensajes de nota, informaciÃ³n o warning!. A continuaciÃ³n se muestran algunos ejemplos: . &gt; Warning: There will be no second warning! . Warning: There will be no second warning! . &gt; Important: Pay attention! It&#39;s important. . Important: Pay attention! It&#8217;s important. . &gt; Tip: This is my tip. . Tip: This is my tip. . &gt; Note: Take note of this. . Note: Take note of this. . Referencias . Repositorio: fastpages | nbdev: notebooks a posts | Fastai: foro | .",
            "url": "https://fralfaro.github.io/ds_blog/jupyter/2021/08/20/fastpages.html",
            "relUrl": "/jupyter/2021/08/20/fastpages.html",
            "date": " â€¢ Aug 20, 2021"
        }
        
    
  
    
        ,"post3": {
            "title": "Jupyter Book",
            "content": "Introducci&#243;n . Jupyter Book es un proyecto de cÃ³digo abierto para crear libros y documentos mediante Jupyter Notebooks y/o Markdown. . Algunas caracterÃ­sticas importantes del uso de Jupyter Book: . contenido con calidad de publicaciÃ³n que incluya figuras, sÃ­mbolos matemÃ¡ticos, citas y referencias cruzadas! | escribir contenido como Jupyter Notebooks, markdown o reStructuredText | Agregue interactividad a su libro, por ejemplo, alternar la visibilidad de las celdas, conectarse con un servicio en lÃ­nea como Binder e incluir resultados interactivos (por ejemplo, figuras y widgets). | generar una variedad de resultados, incluidos sitios web (HTML, CSS, JS), markdown y PDF. | una interfaz de lÃ­nea de comandos para crear libros rÃ¡pidamente, por ejemplo, jupyter-book build mybook | . En esta sesiÃ³n, se muestra un ejemplo de cÃ³mo crear un Jupyter Book desde cero y algunas de las caracterÃ­sticas clave que ofrece Jupyter Book. . Nota:Puede encontrar los cÃ³digos de este ejemplo en el siguiente repositorio. Por otro lado, puede revisar el siguente link para ver la compilaciÃ³n con GitLab CI/CD. . Primeros pasos . Instalaci&#243;n . Para instalar Jupyter Book, necesitarÃ¡ usar la lÃ­nea de comando. Si ha instalado Anaconda, puede usar: . conda install -c conda-forge jupyter-book . De lo contrario, puede instalar con pip: . pip install jupyter-book . Crear una estructura de libro . Jupyter Book viene con una herramienta que le permite crear y construir libros rÃ¡pidamente. Para crear el esqueleto del libro, escriba lo siguiente en la lÃ­nea de comando: . jupyter-book create jupiter . Nota:AquÃ­ llamamos al libro jupiter, pero puedes elegir llamar a tu libro como quieras. . Ahora tendrÃ¡s un nuevo directorio llamado jupiter (o como quieras llamar a tu libro), con el siguiente contenido: . jupiter â”œâ”€â”€ _config.yml â”œâ”€â”€ _toc.yml â”œâ”€â”€ content.md â”œâ”€â”€ intro.md â”œâ”€â”€ markdown.md â”œâ”€â”€ notebooks.ipynb â”œâ”€â”€ references.bib â””â”€â”€ requirements.txt . en donde: . _config.yml: archivo que contiene las configuraciones del proyecto. | _toc.yml: archivo que ordena los capÃ­tulos del libro. | content.md: archivo genÃ©rico .md. | intro.md: archivo genÃ©rico .md. | markdown.md: archivo genÃ©rico .md. | notebooks.ipynb: archivo genÃ©rico .ipynb. | references.bib: archivo para aÃ±adir las referencias. | requirements.txt: archivo que contiene las dependencias python) del proyecto. | . Re-estructuraci&#243;n del directorio . Jupyter Book admite varios tipos de archivos: . Markdown (.md) | notebooks (.ipynb) | etc. | . Como Markdown y Jupyter Notebooks probablemente serÃ¡n los tipos de archivo mÃ¡s comunes que usarÃ¡, se mostrarÃ¡ un ejemplo de ello. . Lo primero serÃ¡ eliminar los archivos de inicio en el directorio: . content.md | intro.md | markdown.md | notebooks.ipynb | . AsÃ­ que ejecutamos por lÃ­nea de comando: . rm content.md intro.md markdown.md notebooks.ipynb . Por otro lado, nuestro proyecto estarÃ© conformado por tres archivos: . index.md | Introduction.md | great_red_spot.ipynb | . Luego, debemos indicar cÃ³mo serÃ¡n mostrados estos documentos en el archivo _toc.yml. La estructura serÃ¡ la siguiente: . format: jb-book root: index chapters: - file: Introduction - file: great_red_spot . En este caso, root: index corresponde al primer archivo que se visualiza en el jupyter-book. Dentro del archivo index.md escribiremos: . # Home jupyter book example ## Contenidos {tableofcontents} . Agregar un archivo Markdown . Se comienza por agregar un archivo de markdown. Con algÃºn editor a elecciÃ³n (por ejemplo, jupyter notebook o jupyterlab) se crea un nuevo archivo markdown llamado Introduction.md. . Se usa este archivo como demostraciÃ³n de algunos de los principales tipos de contenido que puede agregar en Jupyter-Book. . Texto . Se agrega un texto de Markdown simple a nuestro archivo. Si no estÃ¡ familiarizado con la sintaxis de markdown, consulte Markdown Cheat Sheet. Puede copiar y pegar el siguiente contenido directamente en su archivo Introduction.md. . # Jupiter Book This book contains information about the planet **Jupiter** - the fifth planet from the sun and the largest planet in the solar system! . Figuras . Puedes incluir figuras en tu Jupyter Book usando la siguiente sintaxis: . {figure} my_image.png height: 150px name: my-image Here is my image&#39;s caption! . Si bien la imagen puede estar contenida y referenciada desde el directorio raÃ­z, tambiÃ©n se puede incluir imÃ¡genes a travÃ©s de URL. Incluyamos una imagen del planeta JÃºpiter en nuestro archivo Introduction.md usando lo siguiente: . {figure} https://solarsystem.nasa.gov/system/resources/detail_files/2486_stsci-h-p1936a_1800.jpg height: 300px name: jupiter-figure The beautiful planet Jupiter! . La razÃ³n por la que le damos un &quot;nombre&quot; a nuestra imagen es para que podamos hacer referencia a ella fÃ¡cilmente con la sintaxis: . {numref}`jupiter-figure` . Se agregarÃ¡ una oraciÃ³n que incluya esta referencia. El archivo completo ahora deberÃ­a verse asÃ­: . # Jupiter Book This book contains information about the planet Jupiter - the fifth planet from the sun and the largest planet in the solar system! {numref}`jupiter-figure` below shows an image of Jupiter captured by the Hubble Space Telescope on June 27, 2019. {figure} https://solarsystem.nasa.gov/system/resources/detail_files/2486_stsci-h-p1936a_1800.jpg height: 300px name: jupiter-figure The beautiful planet Jupiter! Source: [NASA](https://solarsystem.nasa.gov/resources/2486/hubbles-new-portrait-of-jupiter/?category=planets_jupiter). . En este punto, probablemente se deberÃ­a crear nuetro libro para asegurarnos de que tenga el aspecto esperado. Para hacer eso, primero necesitamos modificar nuestro archivo _toc.yml. Este archivo contiene la tabla de contenido de nuestro libro. Abra ese archivo ahora y elimine todo lo que hay allÃ­. Luego, simplemente agregue lo siguiente: . - file: introduction . Ahora podemos construir nuestro libro desde la lÃ­nea de comandos asegurÃ¡ndonos de que estamos en el directorio raÃ­z de nuestro libro y luego usando: . jupyter-book build . . Una vez finalizada la compilaciÃ³n, tendrÃ¡ un nuevo subdirectorio llamado_build/html/ en la raÃ­z de su libro, navegue hasta esa ubicaciÃ³n y abra _build/html/index.html. DeberÃ­a verse algo como esto: . . Equaciones matem&#225;ticas . Jupyter Book usa MathJax para componer matemÃ¡ticas, lo que le permite agregar matemÃ¡ticas de estilo LaTeX a su libro. Puede agregar matemÃ¡ticas en lÃ­nea, bloques matemÃ¡ticos y ecuaciones numeradas a su libro Jupyter. Sigamos adelante y creemos un nuevo encabezado en nuestro archivo Introduction.md que incluye algunas matemÃ¡ticas. . Las matemÃ¡ticas en lÃ­nea se pueden definir usando $ de la siguiente manera: . Jupiter has a mass of: $m_{j} approx 1.9 times 10^{27} kg$ . Jupiter has a mass of: $m_{j} approx 1.9 times 10^{27} kg$ . Los bloques matemÃ¡ticos se pueden definir usando la notaciÃ³n $$: . $$m_{j} approx 1.9 times 10^{27} kg$$ . $$m_{j} approx 1.9 times 10^{27} kg$$ . Nota:Si lo prefiere, los bloques matemÃ¡ticos tambiÃ©n se pueden definir con begin{equation} en lugar de $$. Las ecuaciones numeradas se pueden definir asÃ­ (este es el estilo que te recomiendo que uses con mÃ¡s frecuencia): . {math} :label: my_label m_{j} approx 1.9 times 10^{27} kg . Agreguemos mÃ¡s contenido a nuestro libro. Copie y agregue el siguiente texto a su archivo Introduction.md: . ## The Mass of Jupiter We can estimate the mass of Jupiter from the period and size of an object orbiting it. For example, we can use Jupiter&#39;s moon Callisto to estimate it&#39;s mass. Callisto&#39;s period: $p_{c}=16.7 days$ Callisto&#39;s orbit radius: $r_{c}=1,900,000 km$ Now, using [Kepler&#39;s Law](https://solarsystem.nasa.gov/resources/310/orbits-and-keplers-laws/) we can work out the mass of Jupiter. {math} :label: eq1 m_{j} approx frac{r_{c}}{p_{c}} times 7.9 times 10^{10} {math} :label: eq2 m_{j} approx 1.9 times 10^{27} kg . A continuaciÃ³n, puede reconstruir su libro (jupyter-book build .) y abrir _build/html/index.html para asegurarse de que todo se estÃ© procesando como se esperaba. . Controlando el dise&#241;o de la p&#225;gina . Hay varias formas diferentes de controlar el diseÃ±o de las pÃ¡ginas de su Jupyter Book. El cambio de diseÃ±o que utilizo con mÃ¡s frecuencia es agregar contenido a un margen en la pÃ¡gina. Puede agregar un margen usando la siguiente directiva: . {margin} An optional title Some margin content. . Agreguemos algo de contenido marginal al libro: . {margin} Did you know? Jupiter is 11.0x larger than Earth! . Advertencias . Hay todo tipo de advertencias diferentes que puede usar en Jupyter Book que se enumeran aquÃ­ en la documentaciÃ³n de Jupyter Book. Las advertencias se crean con la sintaxis: . {note} I am a useful note! . No dude en agregar la siguiente advertencia a Introduction.md: . {hint} NASA provides a lot more information about the physical characteristics of Jupiter [here](https://solarsystem.nasa.gov/planets/jupiter/by-the-numbers/). . Citas y bibliograf&#237;a . El Ãºltimo contenido corresponde a referencias y una bibliografÃ­a. Puede agregar citas de cualquier trabajo almacenado en el archivo Bibtex Reference.bib que se encuentra en el directorio raÃ­z de su libro. . Para incluir una cita en su libro, agregue una entrada bibtex a references.bib, por ejemplo: . @article{mayor1995jupiter, title={A Jupiter-mass companion to a solar-type star}, author={Mayor, Michel and Queloz, Didier}, journal={Nature}, volume={378}, number={6555}, pages={355--359}, year={1995}, publisher={Nature Publishing Group} } @article{guillot1999interiors, title={Interiors of giant planets inside and outside the solar system}, author={Guillot, Tristan}, journal={Science}, volume={286}, number={5437}, pages={72--77}, year={1999}, publisher={American Association for the Advancement of Science} } . Nota: Consulte la documentaciÃ³n de BibTex para obtener informaciÃ³n sobre el estilo de referencia de BibTex. Google Scholar facilita la exportaciÃ³n de un formato de cita bibtex. . A continuaciÃ³n, puede hacer referencia al trabajo en su libro utilizando la siguiente directiva: . {cite}`mayor1995jupiter` . O para mÃºltiples citas: . {cite}`mayor1995jupiter,guillot1999interiors` . Luego puede crear una bibliografÃ­a a partir de reference.bib usando: . {bibliography} references.bib . Por ejemplo, intente agregar esto a su archivo Introduction.md: . There might even be more planets out there with a similar mass to Jupiter {cite}`mayor1995jupiter,guillot1999interiors`! ## Bibliography {bibliography} references.bib . Su archivo final Introduction.md deberÃ­a verse asÃ­: . # Jupiter Book This book contains information about the planet Jupiter - the fifth planet from the sun and the largest planet in the solar system! {numref}`jupiter-figure` below shows an image of Jupiter captured by the Hubble Space Telescope on June 27, 2019. {figure} https://solarsystem.nasa.gov/system/resources/detail_files/2486_stsci-h-p1936a_1800.jpg height: 300px name: jupiter-figure The beautiful planet Jupiter! Source: [NASA](https://solarsystem.nasa.gov/resources/2486/hubbles-new-portrait-of-jupiter/?category=planets_jupiter). ## The Mass of Jupiter We can estimate the mass of Jupiter from the period and size of an object orbiting it. For example, we can use Jupiter&#39;s moon Callisto to estimate it&#39;s mass. Callisto&#39;s period: $p_{c}=16.7 days$ Callisto&#39;s orbit radius: $r_{c}=1,900,000 km$ Now, using [Kepler&#39;s Law](https://solarsystem.nasa.gov/resources/310/orbits-and-keplers-laws/) we can work out the mass of Jupiter. {math} :label: eq1 m_{j} approx frac{r_{c}}{p_{c}} times 7.9 times 10^{10} {math} :label: eq2 m_{j} approx 1.9 times 10^{27} kg {margin} Did you know? Jupiter is 11.0x larger than Earth! {hint} NASA provides a lot more information about the physical characteristics of Jupiter [here](https://solarsystem.nasa.gov/planets/jupiter/by-the-numbers/). There might even be more planets out there with a similar mass to Jupiter {cite}`mayor1995jupiter,guillot1999interiors`! ## Bibliography {bibliography} references.bib . Y deberÃ­a renderizarse asÃ­: . Agregar un archivo de contenido de Jupyter Notebook . Todos los flujos de trabajo de formato y estilo que vimos en markdown tambiÃ©n se aplican a un Jupyter Notebook; simplemente agrÃ©guelos a una celda de markdown y listo. . Comencemos con lo siguiente: . Cree un nuevo notebook llamado great_red_spot.ipynb; | Agregue este archivo a su _toc.yml; | Agregue una celda de markdown con el siguiente contenido: | . # The Great Red Spot Jupiterâ€™s iconic Great Red Spot (GRS) is actually an enormous storm that is bigger than Earth that has raged for hundreds of years! {numref}`great-red-spot` below shows an image of Jupiter captured by the Hubble Space Telescope on June 27, 2019. {figure} https://solarsystem.nasa.gov/system/resources/detail_files/626_PIA21775.jpg height: 300px name: great-red-spot Jupiter&#39;s Great Red Spot! Source: [NASA](https://solarsystem.nasa.gov/resources/626/jupiters-great-red-spot-in-true-color/?category=planets_jupiter). Jupiter&#39;s GRS has been observed to be shrinking for about the last century and a half! [Here](https://github.com/UBC-DSCI/jupyterdays/tree/master/jupyterdays/sessions/beuzen/data) is some data of the length of the GRS spanning the last ~150 years which we can use to investigate this phenomenon. . Â¡Ahora intente construir su libro (jupyter-book build .) para asegurarse de que todo se vea bien! Usando la barra de contenido del lado izquierdo, navegue a la nueva pÃ¡gina â€œThe Great Red Spotâ€, que deberÃ­a verse asÃ­: . . Â¡Ok genial! Ahora importemos los datos a los que hicimos referencia para que podamos crear algunos grÃ¡ficos. . Cree una nueva celda de cÃ³digo debajo de la celda de rebaja actual y agregue el siguiente cÃ³digo para leer en nuestro conjunto de datos de GRS como un marco de datos de Pandas. . import pandas as pd pd.options.plotting.backend = &quot;plotly&quot; url = &quot;https://raw.githubusercontent.com/UBC-DSCI/jupyterdays/master/jupyterdays/sessions/beuzen/data/GRS_data.csv&quot; df = pd.read_csv(url) df[&#39;Year&#39;] = df[&#39;Year&#39;].astype(int) df.head() . Nota:Estamos imprimiendo la salida en la pantalla con el uso de df.head() y esto se mostrarÃ¡ en nuestro Jupyter Book renderizado. Si reconstruye su libro (jupyter-book build .) en este punto, verÃ¡ algo como lo siguiente: . . Ahora, podemos usar estos datos para crear algunos grÃ¡ficos. . Las tramas en su Jupyter Book pueden ser estÃ¡ticas (por ejemplo, matplotlib, seaborn) o interactivas (por ejemplo, altair, plotly, bokeh). Para este tutorial, crearemos algunos grÃ¡ficos de ejemplo usando Plotly (a travÃ©s del backend de Pandas). . Primero creemos un diagrama de dispersiÃ³n simple de nuestros datos. Cree una nueva celda de cÃ³digo en su cuaderno y agregue el siguiente cÃ³digo: . import plotly.io as pio pio.renderers.default = &quot;notebook&quot; fig = df.plot.scatter(x=&quot;Year&quot;, y=&quot;GRS Length&quot;, color=&quot;Recorder&quot;, range_x=[1870, 2030], range_y=[10, 40], width=650, height=400) fig.update_layout(title={&#39;text&#39;: &quot;Great Red Spot Size&quot;, &#39;x&#39;:0.5, &#39;y&#39;:0.92}) fig.update_traces(marker=dict(size=7)) . Ya que estamos en eso, creemos tambiÃ©n una trama animada. Cree otra celda de cÃ³digo nueva y agregue el siguiente cÃ³digo: . fig = df.plot.scatter(x=&quot;Year&quot;, y=&quot;GRS Length&quot;, animation_frame=&quot;Year&quot;, range_x=[1870, 2030], range_y=[10, 40], width=600, height=520) fig.update_layout(title={&#39;text&#39;: &quot;Great Red Spot Size Animation&quot;, &#39;x&#39;:0.5, &#39;y&#39;:0.94}) fig.layout.updatemenus[0].buttons[0].args[1][&quot;frame&quot;][&quot;duration&quot;] = 200 fig.update_traces(marker=dict(size=10)) . Nota: Plotly tiene diferentes renderizadores disponibles para generar grÃ¡ficos. Es posible que deba experimentar con renderizadores para obtener el resultado que desea en su Jupyter Book. He descubierto que pio.renderers.default = &quot;notebook&quot; funciona con la versiÃ³n actual de Jupyter Book. Â¡Ahora, reconstruyamos nuestro libro y echemos un vistazo! . . Es posible que desee ocultar parte del cÃ³digo en su libro, Â¡no hay problema! Eso tambiÃ©n se hace fÃ¡cilmente con Jupyter Book. . El que nos interesa aquÃ­ es ocultar la entrada de cÃ³digo. Podemos hacerlo fÃ¡cilmente agregando la etiqueta hide-input a la celda que deseamos ocultar. Hay varias formas de agregar etiquetas a la celda en Jupyter Notebooks. En Jupyter Lab, haga clic en el icono de engranaje en la barra lateral izquierda y luego agregue la etiqueta deseada como se muestra a continuaciÃ³n: . . ContinÃºe y agregue las etiquetas hide-input a ambas celdas de trazado en su archivo great_red_spot.ipynb. Cuando reconstruyas el libro, verÃ¡s que la entrada del cÃ³digo estÃ¡ oculta (pero se puede alternar con el Ã­cono +): . . Nota:TambiÃ©n puede almacenar el contenido de la libreta como valores, grÃ¡ficos o marcos de datos en variables que se pueden utilizar en toda su libreta mediante la herramienta glue. . Referencias . Jupyter-Book - Documentation | Tutorial - Jupyter Book | .",
            "url": "https://fralfaro.github.io/ds_blog/jupyter/2021/08/11/jb.html",
            "relUrl": "/jupyter/2021/08/11/jb.html",
            "date": " â€¢ Aug 11, 2021"
        }
        
    
  
    
        ,"post4": {
            "title": "RISE",
            "content": "Introducci&#243;n . RISE es una extensiÃ³n a los jupyter notebooks que permite transformar tus notebooks en presentaciones interactivas. . Toda las celdas pueden editarse y ejecutarse directamente, durante la presentaciÃ³n. Esto es prÃ¡ctico si necesitas corregir un error en una celda de texto. MÃ¡s importante aÃºn, puedes ejecutar cÃ³digo directamente en el kernel. En una misma diapositiva puedes tener mÃºltiples celdas y elegir cuÃ¡l ejecutar, o corregir el texto y volver a ejecutar. . . Algunas caracterÃ­sticas importantes del uso de RISE: . Simplifica la generaciÃ³n de material. | Se mantiene un archivo y no varios archivos para hablar de lo mismo. | Es fÃ¡cil de corregir, no se necesita mucho esfuerzo (similar a una PPT). | . En esta sesiÃ³n, se muestra un ejemplo de cÃ³mo crear una presentaciÃ³n con RISE. . Nota:Puede encontrar los cÃ³digos de este ejemplo en el siguiente repositorio. Por otro lado, puede revisar el siguente link para ver la compilaciÃ³n con GitLab CI/CD. . Primeros Pasos . Instalaci&#243;n . Para instalar RISE, necesitarÃ¡ usar la lÃ­nea de comando. Si ha instalado Anaconda, puede usar: . conda install -c conda-forge rise . De lo contrario, puede instalar con pip: . pip install RISE . Nota:No interactuarÃ¡s directamente con RISE. En su lugar, podrÃ¡ acceder a Ã©l a travÃ©s de Jupyter Notebooks. . Habilitaci&#243;n del modo de presentaci&#243;n . Para crear una presentaciÃ³n, deberÃ¡ iniciar Jupyter Notebooks y abrir un nuevo notebook (tenga en cuenta que debe hacer esto despuÃ©s de haber instalado RISE). Una vez que tenga un Jupyter Notebook nuevo, deberÃ¡ habilitar la presentaciÃ³n de diapositivas. Puede hacer esto haciendo lo siguiente: . Haga clic en &quot;Ver&quot; en la barra de herramientas de Jupyter | Coloca el cursor sobre &quot;Barra de herramientas de celda&quot; en el menÃº &quot;Ver&quot; | Haga clic en &quot;PresentaciÃ³n de diapositivas&quot; en el menÃº &quot;Barra de herramientas de celda&quot; | . . Creando las diapositivas con celdas . En este punto, deberÃ­a tener una barra de herramientas de celda con un menÃº desplegable en el lado derecho: . DeberÃ­a ver seis opciones aquÃ­. Este menÃº desplegable y sus opciones determinan cÃ³mo encaja cada celda en la presentaciÃ³n. Las opciones y sus descripciones se encuentran a continuaciÃ³n: . slide: indica que la celda seleccionada debe ser el comienzo de una nueva diapositiva. | sub-slide -: indica que la celda seleccionada debe ser el comienzo de una nueva sub-diapositiva, que aparece en un nuevo marco debajo de la diapositiva anterior. | fragment: indica que la celda seleccionada debe aparecer como una compilaciÃ³n de la diapositiva anterior. | skip: indica que la celda seleccionada debe omitirse y no ser parte de la presentaciÃ³n de diapositivas. | notes: indica que la celda seleccionada debe ser solo notas del presentador. | - -: indica que la celda seleccionada debe seguir el comportamiento de la celda anterior, lo cual es Ãºtil cuando una celda de rebaja y una celda de cÃ³digo deben aparecer simultÃ¡neamente. | . Cada una de estas opciones puede incluir cÃ³digo Python o cÃ³digo Markdown/HTML/LaTeX como un Jupyter Notebook tradicional. . Ver la presentaci&#243;n de diapositivas . Una vez que se han utilizado las celdas para crear material para la presentaciÃ³n, la presentaciÃ³n se puede ver directamente desde el notebook. . Hay dos opciones para ver la presentaciÃ³n de diapositivas: . Usar el acceso directo OPTION + R shortcut (ALT + R on Windows) para ingresar y salir del modo de presentaciÃ³n desde dentro de la computadora portÃ¡til | Al hacer clic en el botÃ³n &quot;Modo de presentaciÃ³n&quot; de la computadora portÃ¡til, esto solo aparecerÃ¡ si ha instalado RISE. | . . DespuÃ©s de ingresar al modo de presentaciÃ³n, deberÃ­a ver una pantalla similar a esta: . . Cambio de diapositivas . Si bien puede ser tentador usar las teclas &lt;- y -&gt; para cambiar las diapositivas en la presentaciÃ³n, esto no funcionarÃ¡ por completo: omitirÃ¡ las celdas marcadas como sub-slides. En su lugar, se debe usar ESPACIO para mover la presentaciÃ³n de diapositivas hacia adelante y MAYÃšS + ESPACIO para mover la presentaciÃ³n de diapositivas hacia atrÃ¡s. . Hay muchos otros atajos de teclado a los que se puede acceder dentro de la presentaciÃ³n haciendo clic en el signo de interrogaciÃ³n (?) en la esquina inferior izquierda. . Ejecuci&#243;n de c&#243;digo y edici&#243;n sobre la marcha . Una de las mejores cosas de RISE es que funciona en una sesiÃ³n de Python en vivo, lo que significa que puede editar y ejecutar cÃ³digo mientras se ejecuta la presentaciÃ³n. . . Exportar presentaci&#243;n . Puedes exportar tu presentaciÃ³n desplegando la opciÃ³n: File -&gt; Download as. . Nota:Para poder descargar en formato .pdf, necesita tener instalado pandoc. . . Referencias . RISE - Documentation | Creating Interactive Slideshows in Jupyter Notebooks | .",
            "url": "https://fralfaro.github.io/ds_blog/jupyter/2021/08/05/rise.html",
            "relUrl": "/jupyter/2021/08/05/rise.html",
            "date": " â€¢ Aug 5, 2021"
        }
        
    
  
    
        ,"post5": {
            "title": "Jupyter Noteboook",
            "content": "Introducci&#243;n . Jupyter Notebook, es un entorno de trabajo interactivo que permite desarrollar cÃ³digo en Python (por defecto, aunque permite otros lenguajes) de manera dinÃ¡mica, a la vez que integrar en un mismo documento tanto bloques de cÃ³digo como texto, grÃ¡ficas o imÃ¡genes. Es un SaaS utilizado ampliamente en anÃ¡lisis numÃ©rico, estadÃ­stica y machine learning, entre otros campos de la informÃ¡tica y las matemÃ¡ticas. . Por otro lado, JupyterLab es similar a Jupyter Notebook en cuanto a sus funcionalidade, pero tiene un interfaz mÃ¡s interesante para los usuarios. Eventualmente Jupyter Lab reemplazarÃ¡ a Jupyter Notebok. . Nos centraremos en comprender aspectos bÃ¡sicos de cÃ³mo trabajar un archivo en jupyter notebook (extensiÃ³n .ipynb). . Primeros Pasos . Instalaci&#243;n . Para instalar RISE, necesitarÃ¡ usar la lÃ­nea de comando. Si ha instalado Anaconda, puede usar: . conda install -c conda-forge notebook . De lo contrario, puede instalar con pip: . pip install notebook . Nota:SI desea instalar JupyterLab, simplemente reemplaza notebook por jupyterlab. . Primeros pasos . Notebook Server . Una vez que haya instalado Jupyter Notebook en su computadora, estarÃ¡ listo para ejecutar el servidor de la computadora portÃ¡til. Puede iniciar el servidor del portÃ¡til desde la lÃ­nea de comandos (usando Terminal en Mac/Linux, SÃ­mbolo del sistema en Windows) ejecutando: . jupyter notebook . Esto imprimirÃ¡ cierta informaciÃ³n sobre el servidor en su terminal, incluida la URL de la aplicaciÃ³n web (de forma predeterminada, http://localhost:8888): . $ jupyter notebook [I 08:58:24.417 NotebookApp] Serving notebooks from local directory: /Users/catherine [I 08:58:24.417 NotebookApp] 0 active kernels [I 08:58:24.417 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/ [I 08:58:24.417 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation). . A continuaciÃ³n, abrirÃ¡ su navegador web predeterminado a esta URL. Cuando el notebook se abra en su navegador, verÃ¡ el Panel, que mostrarÃ¡ una lista de notebooks, archivos y subdirectorios en el directorio donde se iniciÃ³ el servidor. . . La parte superior de la lista de notebooks se muestran rutas de navegaciÃ³n en las que se puede hacer clic del directorio actual. . Para crear un nuevo notebook, haga clic en el botÃ³n New en la parte superior de la lista y seleccione el kernel del menÃº desplegable (como se ve a continuaciÃ³n). Los kernels que se enumeran dependen de lo que estÃ© instalado en el servidor. . Nota:Es posible que algunos de los kernels de la siguiente captura de pantalla no existan como una opciÃ³n para usted. . . Una vez seleccionado el kernel, se abrira nuestro primer notebook!. . . Toolbox . Jupyter notebook nos ofrece el siguiente toolbox: . . File: En Ã©l, puede crear un nuevo cuaderno o abrir uno preexistente. AquÃ­ es tambiÃ©n a donde irÃ­a para cambiar el nombre de un Cuaderno. Creo que el elemento de menÃº mÃ¡s interesante es la opciÃ³n Guardar y Checkpoint. Esto le permite crear puntos de control a los que puede retroceder si lo necesita. | . Edit: AquÃ­ puede cortar, copiar y pegar celdas. AquÃ­ tambiÃ©n es donde irÃ­as si quisieras eliminar, dividir o fusionar una celda. Puede reordenar celdas aquÃ­ tambiÃ©n. | . View: es Ãºtil para alternar la visibilidad del encabezado y la barra de herramientas. TambiÃ©n puede activar o desactivar los nÃºmeros de lÃ­nea dentro de las celdas. AquÃ­ tambiÃ©n es donde irÃ­as si quieres meterte con la barra de herramientas de la celda. | . Insert: es solo para insertar celdas encima o debajo de la celda seleccionada actualmente. | . Cell: le permite ejecutar una celda, un grupo de celdas o todas las celdas. TambiÃ©n puede ir aquÃ­ para cambiar el tipo de celda, aunque personalmente considero que la barra de herramientas es mÃ¡s intuitiva para eso. | . Kernel: es para trabajar con el kernel que se ejecuta en segundo plano. AquÃ­ puede reiniciar el kernel, volver a conectarlo, apagarlo o incluso cambiar el kernel que estÃ¡ utilizando su computadora portÃ¡til. | . Widgets: es para guardar y borrar el estado del widget. Los widgets son bÃ¡sicamente widgets de JavaScript que puede agregar a sus celdas para crear contenido dinÃ¡mico utilizando Python (u otro Kernel). | . Help: es donde debe aprender sobre los atajos de teclado del Notebook, un recorrido por la interfaz de usuario y mucho material de referencia. | . Markdown . Jupyter Notebook permite que escribamos texto formateado, es decir, texto con cursiva, negritas, tÃ­tulos de distintos tamaÃ±os, etc., de forma simple. Para ello Jupyter nos permite usar Markdown, que es un lenguaje de marcado (markup) muy popular. . Los lenguajes de markup son lenguajes ideados para procesar texto, algunos de los mÃ¡s conocidos son HTML y $ LaTeX$. Markdown tiene como objetivo ser un lenguaje de sintaxis minimalista, simple de aprender y usar; de esa forma uno puede dar formato al texto pero sin perder demasiado tiempo en los detalles. . La cantidad de tutoriales en la red sobre Markdown es inmenso, por lo que nos centraremos en indicar las opciones que mÃ¡s se utilizan. . Texto en negrita/cursiva: El texto en negrita se indica entre dos pares de asteriscos. De este modo **palabra** aparecerÃ¡ como palabra. Por otro lado, el texto en cursiva se indica entre dos asteriscos simples; es decir *palabra* aparecerÃ¡ como palabra. | . Listas: Las listas en Markdown se realizan indicando un asterisco o un nÃºmero seguido de un punto si se desean listas numeradas. Markdown organiza automÃ¡ticamente los items asignÃ¡ndoles el nÃºmero correcto. | . InclusiÃ³n de imÃ¡genes: La sintaxis para incluir imÃ¡genes en Markdown es ![nombre alternativo](direcciÃ³n de la imagen) en donde el nombre alternativo aparecerÃ¡ en caso de que no se pueda cargar la imÃ¡gen y la direcciÃ³n puede referirse a una imagen local o un enlace en Internet. | . InclusiÃ³n de cÃ³digo HTML: El lenguaje Markdown es un subconjunto del lenguaje HTML y en donde se necesite un mayor control del formato, se puede incluir directamente el cÃ³digo HTML. | . Enlaces: Las celdas de texto pueden contener enlaces, tanto a otras partes del documento, como a pÃ¡ginas en internet u otros archivos locales. Su sintaxis es [texto](direcciÃ³n del enlace). | . FÃ³rmulas matemÃ¡ticas: Gracias al uso de MathJax, se puede incluir cÃ³digo en $ LaTeX$ para mostrar todo tipo de fÃ³rmulas y expresiones matemÃ¡ticas. Las fÃ³rmulas dentro de una lÃ­nea de texto se escriben entre sÃ­mbolos de dÃ³lar $...$, mientras que las expresiones separadas del texto utilizan sÃ­mbolos de dÃ³lar dobles $$...$$. Los siguientes son ejemplos de fÃ³rmulas matemÃ¡ticas escritas en $ LaTeX$: | . $$p(x) = 3x^2 + 5y^2 + x^2y^2$$ . $$e^{ pi i} - 1 = 0$$ . $$ lim_{x rightarrow infty} 3x+1$$ . $$ sum_{n=1}^ infty frac{1}{n^2}$$ . $$ int_0^ infty frac{ sin x}{x} , mathrm{d}x= frac{ pi}{2}$$ . C&#243;digo . Jupyter Notebook permite que escribamos cÃ³digo dependiendo del kernel a trabajar. Por defecto, se trabaja con el kernel de Python. . Veamos unos ejemplos sencillos de cÃ³digo: . import math n = 16 print(f&quot;La raiz cuadra de {n} es {math.sqrt(n)}&quot;) . La raiz cuadra de 16 es 4.0 . TambiÃ©n es posible visualizar tablas de datos con la librerÃ­a pandas: . import pandas as pd import altair as alt # datasets movies = &#39;https://vega.github.io/vega-datasets/data/movies.json&#39; stocks = &#39;https://vega.github.io/vega-datasets/data/stocks.csv&#39; . . df = pd.read_json(movies) # load movies data df.columns = [x.replace(&#39; &#39;, &#39;_&#39;) for x in df.columns.values] df.head() . Title US_Gross Worldwide_Gross US_DVD_Sales Production_Budget Release_Date MPAA_Rating Running_Time_min Distributor Source Major_Genre Creative_Type Director Rotten_Tomatoes_Rating IMDB_Rating IMDB_Votes . 0 The Land Girls | 146083.0 | 146083.0 | NaN | 8000000.0 | Jun 12 1998 | R | NaN | Gramercy | None | None | None | None | NaN | 6.1 | 1071.0 | . 1 First Love, Last Rites | 10876.0 | 10876.0 | NaN | 300000.0 | Aug 07 1998 | R | NaN | Strand | None | Drama | None | None | NaN | 6.9 | 207.0 | . 2 I Married a Strange Person | 203134.0 | 203134.0 | NaN | 250000.0 | Aug 28 1998 | None | NaN | Lionsgate | None | Comedy | None | None | NaN | 6.8 | 865.0 | . 3 Let&#39;s Talk About Sex | 373615.0 | 373615.0 | NaN | 300000.0 | Sep 11 1998 | None | NaN | Fine Line | None | Comedy | None | None | 13.0 | NaN | NaN | . 4 Slam | 1009819.0 | 1087521.0 | NaN | 1000000.0 | Oct 09 1998 | R | NaN | Trimark | Original Screenplay | Drama | Contemporary Fiction | None | 62.0 | 3.4 | 165.0 | . Unas de las cosas mÃ¡s significativas de Jupyter notebook es poder trabajar con distintos tipos de grÃ¡ficos (imagen estÃ¡tica o interactiva). Estos son de bastante utilidad para poder comprender nuestros procedimientos. . # select a point for which to provide details-on-demand label = alt.selection_single( encodings=[&#39;x&#39;], # limit selection to x-axis value on=&#39;mouseover&#39;, # select on mouseover events nearest=True, # select data point nearest the cursor empty=&#39;none&#39; # empty selection includes no data points ) # define our base line chart of stock prices base = alt.Chart().mark_line().encode( alt.X(&#39;date:T&#39;), alt.Y(&#39;price:Q&#39;, scale=alt.Scale(type=&#39;log&#39;)), alt.Color(&#39;symbol:N&#39;) ) alt.layer( base, # base line chart # add a rule mark to serve as a guide line alt.Chart().mark_rule(color=&#39;#aaa&#39;).encode( x=&#39;date:T&#39; ).transform_filter(label), # add circle marks for selected time points, hide unselected points base.mark_circle().encode( opacity=alt.condition(label, alt.value(1), alt.value(0)) ).add_selection(label), # add white stroked text to provide a legible background for labels base.mark_text(align=&#39;left&#39;, dx=5, dy=-5, stroke=&#39;white&#39;, strokeWidth=2).encode( text=&#39;price:Q&#39; ).transform_filter(label), # add text labels for stock prices base.mark_text(align=&#39;left&#39;, dx=5, dy=-5).encode( text=&#39;price:Q&#39; ).transform_filter(label), data=stocks ).properties( width=500, height=400 ) . . Completado mediantes Tabs. . La completaciÃ³n mediante tabs, especialmente para los atributos, es una forma conveniente de explorar la estructura de cualquier objeto con el que estÃ© tratando. . Simplemente escriba object_name.&lt;TAB&gt; para ver los atributos del objeto. AdemÃ¡s de los objetos y palabras clave de Python, la finalizaciÃ³n de pestaÃ±as tambiÃ©n funciona en nombres de archivos y directorios. . import collections collections. # aprete la tecla &lt;ğ‘‡ğ´ğµ&gt; . Buscando ayuda . En caso de necesitar ayuda sobre cualquier comando de Python, Jupyter nos ofrece una funciÃ³n llamada help. . En resumen, Â¡suele ser mÃ¡s importante saber como buscar informaciÃ³n que memorizarla! Por todo esto, Jupyter nos ofrece ayuda sobre cualquier comando agregando un signo de interrogaciÃ³n ? luego del nombre del comando (y luego ejecutar la celda con la combinaciÃ³n de teclas SHIFT + ENTER). . import numpy as np np.sum? . Magics . Jupyter posee varias funciones mÃ¡gicas predefinidas que sirven para simplificar tareas comunes. . Hay dos tipos de magias: . Magias por linea (line magics): son comandos que empiezan con el caracter % y que toman como argumentos valores escritos en la misma lÃ­nea. | . Magias por celda (cell magics): son comandos que empiezan con los caracteres %%, y que reciben argumentos en la misma lÃ­nea y en toda la celda. | . En general solo se puede usar una sola mÃ¡gias por celda en cada celda y debe ser escrita en la primer linea de la celda. . Un buen ejemplo de mÃ¡gia es %lsmagic que lista todas las magias disponibles: . %lsmagic . Available line magics: %alias %alias_magic %autoawait %autocall %automagic %autosave %bookmark %cat %cd %clear %colors %conda %config %connect_info %cp %debug %dhist %dirs %doctest_mode %ed %edit %env %gui %hist %history %killbgscripts %ldir %less %lf %lk %ll %load %load_ext %loadpy %logoff %logon %logstart %logstate %logstop %ls %lsmagic %lx %macro %magic %man %matplotlib %mkdir %more %mv %notebook %page %pastebin %pdb %pdef %pdoc %pfile %pinfo %pinfo2 %pip %popd %pprint %precision %prun %psearch %psource %pushd %pwd %pycat %pylab %qtconsole %quickref %recall %rehashx %reload_ext %rep %rerun %reset %reset_selective %rm %rmdir %run %save %sc %set_env %store %sx %system %tb %time %timeit %unalias %unload_ext %who %who_ls %whos %xdel %xmode Available cell magics: %%! %%HTML %%SVG %%bash %%capture %%debug %%file %%html %%javascript %%js %%latex %%markdown %%perl %%prun %%pypy %%python %%python2 %%python3 %%ruby %%script %%sh %%svg %%sx %%system %%time %%timeit %%writefile Automagic is ON, % prefix IS NOT needed for line magics. . En varias situaciones resulta necesario medir el tiempo de ejecuciÃ³n de una porciÃ³n de cÃ³digo. Para ello podemos usar la magia %timeit. Esta magia estÃ¡ disponible tanto para lÃ­nea como para celda: . %%timeit 1+1 # timeit repite (adaptativamente) la mediciÃ³n a fin de reducir el error. . 8.68 ns Â± 0.387 ns per loop (mean Â± std. dev. of 7 runs, 100000000 loops each) . Jupyter notebook permite tambiÃ©n mezclar varios lenguajes de programaciÃ³n en una misma notebook. Por ejemplo, podrÃ­amos escribir en bash lo siguiente: . %%bash for i in {3..1}; do echo $i done echo &quot;Hola desde $BASH&quot; . 3 2 1 Hola desde /usr/bin/bash . TambiÃ©n, puede acceder a la lÃ­nea de comandos, anteponiendo el sÃ­mbolo de !. Esto es de bastante utilidad cuando se quiere mostrar las dependencias que se necesitan instalar. (ejemplo: !pip install pandas). . Veamos un ejemplo: . !pwd . /home/fralfaro/PycharmProjects/ds_blog/_notebooks . Referencia . Notebook Basics | Running the Notebook | .",
            "url": "https://fralfaro.github.io/ds_blog/jupyter/2021/07/31/jupyter.html",
            "relUrl": "/jupyter/2021/07/31/jupyter.html",
            "date": " â€¢ Jul 31, 2021"
        }
        
    
  
    
        ,"post6": {
            "title": "TDD",
            "content": "Introducci&#243;n . Esta secciÃ³n busca dar seÃ±ales de cÃ³mo abordar el desarrollo de software para Data Science usando Test Driven Development, una tÃ©cnica ampliamente usada en otros rubros de la programaciÃ³n. . &#191;Qu&#233; es el Test Driven Development? . En palabras simples, el desarrollo guiado por pruebas pone las pruebas en el corazÃ³n de nuestro trabajo. En su forma mÃ¡s simple consiste en un proceso iterativo de 3 fases: . . Red: Escribe un test que ponga a prueba una nueva funcionalidad y asegurate de que el test falla | Green: Escribe el cÃ³digo mÃ­nimo necesario para pasar ese test | Refactor: Refactoriza de ser necesario | . Ejemplo sencillo . A modo de ejemplo, vamos a testear la funciÃ³n paridad, que determina si un nÃºmero natural es par o no. . Lo primero que se debe hacer es crear el test, para ello se ocuparÃ¡ la librerÃ­a pytest. . Nota:No es necesario conocer previamente la librerÃ­a pytest para entender el ejemplo. . @pytest.mark.parametrize( &quot;number, expected&quot;, [ (2, &#39;par&#39;), ]) def test_paridad(number, expected): assert paridad(number) == expected . El test nos dice que si el input es el nÃºmero 2, la funciÃ³n paridad devuelve el output &#39;par&#39;. CÃ³mo aÃºn no hemos escrito la funciÃ³n, el test fallarÃ¡ (fase red). . ========= test session starts ============================================ platform linux -- Python 3.8.10, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 rootdir: /home/fralfaro/PycharmProjects/ds_blog plugins: anyio-3.3.0 collected 1 item temp/test_funcion.py F [100%] ========= 1 failed in 0.14s =============================================== . Ahora, se escribe la funciÃ³n paridad (fase green): . def paridad(n:int)-&gt;str: &quot;&quot;&quot; Determina si un numero natural es par o no. :param n: numero entero :return: &#39;par&#39; si es el numero es par; &#39;impar&#39; en otro caso &quot;&quot;&quot; return &#39;par&#39; if n%2==0 else &#39;impar&#39; . Volvemos a correr el test: . ========= test session starts ============================================ platform linux -- Python 3.8.10, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 rootdir: /home/fralfaro/PycharmProjects/ds_blog plugins: anyio-3.3.0 collected 1 item temp/test_funcion.py . [100%] ========= 1 passed in 0.06s =============================================== . Hemos cometido un descuido a proposito, no hemos testeado el caso si el nÃºmero fuese impar, por lo cual reescribimos el test (fase refactor) . @pytest.mark.parametrize( &quot;number, expected&quot;, [ (2, &#39;par&#39;), (3, &#39;impar&#39;), ]) def test_paridad(number, expected): assert paridad(number) == expected . y corremos nuevamente los test: . ========= test session starts ============================================ platform linux -- Python 3.8.10, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 rootdir: /home/fralfaro/PycharmProjects/ds_blog plugins: anyio-3.3.0 collected 2 items temp/test_funcion.py .. [100%] ========= 2 passed in 0.06s =============================================== . Listo, nuestra funciÃ³n paridad ha sido testeado correctamente!. . &#191;Porqu&#233; deber&#237;a usarlo? . Existen varias razones por las que uno deberÃ­a usar TDD. Entre ellas podemos encontrar: . Formular bien nuestros pensamientos mediante la escritura de un test significativo antes de ponernos a solucionar el problema nos ayuda a clarificar los lÃ­mites del problema y cÃ³mo podemos resolverlo. Con el tiempo esto ayuda a obtener un diseÃ±o modular y reusable del cÃ³digo. | Escribir tests ayuda la forma en que escribimos cÃ³digo, haciÃ©ndolo mÃ¡s legible a otros. Sin embargo, no es un acto de altruismo, la mayorÃ­a de las veces ese otro es tu futuro yo. | Verifica que el cÃ³digo funciona de la manera que se espera, y lo hace de forma automÃ¡tica. | Te permite realizar refactoring con la certeza de que no has roto nada. | Los tests escritos sirven como documentaciÃ³n para otros desarrolladores. | Es una prÃ¡ctica requerida en metodologÃ­as de desarrollo de software agile. | . Evidencia emp&#237;rica . El 2008, Nagappan, Maximilien, Bhat y Williams publicaron el paper llamado Realizing Quality Improvement Through Test Driven Development - Results and Experiences of Four Industrial Teams, en donde estudiaron 4 equipos de trabajo (3 de Microsoft y 1 de IBM), con proyectos que variaban entre las 6000 lineas de cÃ³digo hasta las 155k. Estas son parte de sus conclusiones: . Todos los equipos demostraron una baja considerable en la densidad de defectos:40% para el equipo de IBM, y entre 60-90% para los equipos de Microsoft. . Como todo en la vida, nada es gratis: . Incremento del tiempo de desarrollo varÃ­a entre un 15% a 35%. . Sin embargo . Desde un punto de vista de eficacia este incremento en tiempo de desarrollo se compensa por los costos de mantenciÃ³n reducidos debido al incremento en calidad. . AdemÃ¡s, es importante escribir tests junto con la implementaciÃ³n en pequeÃ±as iteraciones. George y Williams encontraron que escribir tests despuÃ©s de que la aplicaciÃ³n estÃ¡ mas o menos lista hace que se testee menos porque los desarrolladores piensan en menos casos, y ademÃ¡s la aplicaciÃ³n se vuelve menos testeable. Otra conclusiÃ³n interesante del estudio de George y Williams es que un 79% de los desarrolladores experimentaron que el uso de TDD conlleva a un diseÃ±o mÃ¡s simple. . &#191;Puedo usar TDD siempre? . No, pero puedes usarlo casi siempre. El anÃ¡lisis exploratorio es un caso en que el uso de TDD no hace sentido. Una vez que tenemos definido el problema a solucionar y un mejor entendimiento del problema podemos aterrizar nuestras ideas a la implementaciÃ³n vÃ­a testing. . Librer&#237;as disponibles . AcÃ¡ listamos algunas librerÃ­as de TDD en Python: . unittest: MÃ³dulo dentro de la librerÃ­a estÃ¡ndar de Python. Permite realizar tests unitarios, de integraciÃ³n y end to end. | doctest: Permite realizar test de la documentaciÃ³n del cÃ³digo (ejemplos: Numpy o Pandas). | pytest: LibrerÃ­a de testing ampliamente usada en proyectos nuevos de Python. | nose: LibrerÃ­a que extiende unittest para hacerlo mÃ¡s simple. | coverage: Herramienta para medir la cobertura de cÃ³digo de los proyectos. | tox: Herramienta para facilitar el test de una librerÃ­a en diferentes versiones e intÃ©rpretes de Python. | hypothesis: LibrerÃ­a para escribir tests vÃ­a reglas que ayuda a encontrar casos borde. | behave: Permite utilizar Behavior Driven Development, un proceso de desarrollo derivado del TDD. | . Knowledge base / Lecturas recomendadas . Realizing Quality Improvement Through Test Driven Development - Results and Experiences of Four Industrial Teams, es una buena lectura, sobretodo los consejos que dan en las conclusiones. | Google Testing Blog: Poseen varios artÃ­culos sobre cÃ³mo abordar problemas tipo, buenas prÃ¡cticas de diseÃ±o para generar cÃ³digo testeable, entre otros. En particular destaca la serie Testing on the Toilet. | Cualquier artÃ­culo de Martin Fowler sobre testing, empezando por Ã©ste | Design Patterns: Los patrones de diseÃ±o de software tienen en consideraciÃ³n que el cÃ³digo sea testeable. | .",
            "url": "https://fralfaro.github.io/ds_blog/jupyter/2021/07/15/tdd.html",
            "relUrl": "/jupyter/2021/07/15/tdd.html",
            "date": " â€¢ Jul 15, 2021"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About me",
          "content": "Contact Information . Â  . Name: Francisco Antonio Alfaro Medina | Phone: +56 9 94541139 | Email: francisco.alfaro.496@gmail.com | Curriculum Vitae: link | . Personal Information . ğŸ® Gaming | ğŸ€ Basketball | ğŸ’¡ Learning | ğŸ“š Teaching . Statistician and Teacher at Universidad TÃ©cnica Federico Santa MarÃ­a. I currently work as a Senior Data Scientist at Walmart (Chile). I enjoy programming, learning about different topics and teaching about maths and computer. . ğŸ” Interests: . Software Development | Statistical Modelling | Machine/Deep Learning | Cloud computing | Big Data | Time Series | . My Tech Stack . Languages &amp; Frameworks . Â  Â  Â  . Cloud . Â  . Tools and Others . Â  . Certifications . .",
          "url": "https://fralfaro.github.io/ds_blog/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
      ,"page3": {
          "title": "Research & Talks",
          "content": "Research . ğŸ§¾ Alfaro,F. (2019). Estimation of the reciprocal effects between Happiness and Job Performance in Chile. Master thesis. | ğŸ§¾ Alfaro,F. (2018/2019). University retention about construction engineering students.Investigation. | ğŸ§¾ Alfaro,F. (2018). Spatial-statistics study for 3D Kriging (laboratory tests for tailings).Investigation. | ğŸ§¾ Alfaro,F. (2017). Fraud detection in drinking water consumption.Degree thesis. | . Talks . ğŸ’¬ Alfaro,F. (2018). Estimation of the reciprocal effects between Happiness and Job Performance in Chile. FNE33/CLATSE13 Congress. Guadalajara, MX. | .",
          "url": "https://fralfaro.github.io/ds_blog/research/",
          "relUrl": "/research/",
          "date": ""
      }
      
  

  
  

  
  

  
      ,"page6": {
          "title": "Software",
          "content": "Python Packages . Python is an interpreted high-level general-purpose programming language. Python is used for web development, AI, machine learning, operating systems, mobile application development, and video games. I contribute as developer/maintainer of the following Python packages: . Note: The original projects was developed by Felipe Osorio. These repositories are only a packages transform from R to Python. . fastmatrix: Fast computation of some matrices useful in statistics . Â  . Yet another R package for matrices. It contains a small set of functions to fast computation of some matrices and operations useful in statistics. . HEAVY: Robust estimation using heavy-tailed distributions . Â  . Functions to perform robust estimation considering heavy-tailed distributions. Currently, the package includes linear regression, linear mixed-effect models, multivariate location and scatter estimation, multivariate regression, penalized splines and random variate generation. . L1pack: Routines for L1 Estimation . Â  . Provides routines to perform L1 estimation for linear regression, evaluation of density, distribution function, quantile function and random number generation for univariate and multivariate Laplace distribution. . MVT: Estimation and testing for the multivariate t-distribution . Â  . This package contains a set of routines to perform estimation and inference under the multivariate t-distribution. These methods are a direct generalization of the multivariate inference under the gaussian assumption. In addition, these procedures provide robust methods useful against outliers. . SpatialPack: Tools for assessment the association between two spatial processes . Â  . This package provides tools to assess the association between two spatial processes. Currently, four methodologies are implemented: A modified t-test to perform hypothesis testing about the independence between the processes, a suitable nonparametric correlation coefficient, the codispersion coefficient, and an F test for assessing the multiple correlation between one spatial process and several others. Functions for image processing and computing the spatial association between images are also provided. SpatialPack gives methods to complement methodologies that are available in geoR for one spatial process. .",
          "url": "https://fralfaro.github.io/ds_blog/software/",
          "relUrl": "/software/",
          "date": ""
      }
      
  

  
      ,"page7": {
          "title": "Teaching",
          "content": "Universities Courses . MAT281 - Applications of Mathematics in Engineering . University: Universidad TÃ©cnica Federico Santa MarÃ­a (UTFSM). | Course: Applications of Mathematics in Engineering. | Course abbreviation: MAT281. | Prerequisites: None. | Academic Unit that teaches it: Department of Mathematics. | Training axis: Applied Engineering and Integration. | Information: file. | Repository: 2019, 2020, 2021. | . Previous Courses . MAT021 - Calculus and Algebra I (UTFSM). | MAT022 - Calculus and Algebra II (UTFSM). | . Personal Courses . Basic Tools . Course: Basic Tools. | Description: Basic tools for Data Scientists. | Repository: link. | . Python Introduction . Course: Python Introduction. | Description: Basic concepts about Python. | Repository: link. | . Data Structures and Algorithms . Course: Data Structures and Algorithms. | Description: Data structures and algorithms with Python. | Repository: link. | . Data Manipulation . Course: Data Manipulation. | Description: Basic concepts about data manipulation wih Python (Numpy, Panda, Matplotlib). | Repository: link. | . Machine Learning . Course: Machine Learning. | Description: Basic concepts about Machine Learning (numpy, pandas, scikit-learn). | Repository: link. | . Deep Learning . Course: Deep Learning. | Description: Basic concepts about Deep Learning with Tensorflow and Keras. | Repository: link. | . Big Data . Course: Big Data. | Description: Basic concepts about Big Data with Pyspark | Repository: link | . Software Design . Course: Software Design. | Description: Basic concepts about software design (version control, testing, and automatic build management). | Repository: link. | .",
          "url": "https://fralfaro.github.io/ds_blog/teaching/",
          "relUrl": "/teaching/",
          "date": ""
      }
      
  

  
  

  
  

  
  

  
      ,"page11": {
          "title": "",
          "content": "Sitemap: {{ â€œsitemap.xmlâ€ | absolute_url }} | .",
          "url": "https://fralfaro.github.io/ds_blog/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}